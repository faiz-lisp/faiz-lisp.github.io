// Download by http://www.codefans.net
function BaseGoods(p_id,p_name,p_image_id){this.id=p_id;this.name=p_name;this.imageId=p_image_id;this.image=IMAGE_PATH+p_image_id+".jpg";}
BaseGoods.prototype.clone=function(){return new BaseGoods(this.id,this.name,this.imageId);};function AddPropertyGoods(p_id,p_name,p_image_id,p_add_property_array,p_gain_goods_des,p_condition_obj){this.id=p_id;this.name=p_name;this.imageId=p_image_id;this.addPropertyArray=p_add_property_array;this.gainGoodsDes=p_gain_goods_des;this.conditionObj=p_condition_obj;this.image=IMAGE_PATH+p_image_id+".jpg";}
AddPropertyGoods.prototype.clone=function(){return new AddPropertyGoods(this.id,this.name,this.imageId,this.addPropertyArray,this.gainGoodsDes,this.conditionObj);};function ViewGuaiWin(p_player){this.player=p_player;this.pageContainer=$('<div id="viewGuaiWinDivContainer"/>').addClass('viewGuaiDialogCss').css('display','none');}
ViewGuaiWin.prototype.show=function(p_map,p_action){this.player.isMoveing=false;this.player.isViewGuai=true;this.pageContainer.attr("innerHTML","");var innerHtml=new StringBuffer();var i,j,k,haveFlag;var guaiwuArray=new Array();for(i=0;i<p_map.datas.length;i++){for(j=0;j<p_map.datas[i].length;j++){var tmpGuai=p_map.datas[i][j];if(tmpGuai.id<=300){haveFlag=false;for(k=0;k<guaiwuArray.length;k++){var tmpGuaiArrayGuai=guaiwuArray[k];if(tmpGuaiArrayGuai.id==tmpGuai.id){haveFlag=true;break;}}
if(!haveFlag){var ret=computeFightLossLife((this.player.property['gongjiMin']+this.player.property['gongjiMax'])/2,this.player.property['fangyu'],this.player.property['sudu'],(tmpGuai.property['gongjiMin']+tmpGuai.property['gongjiMax'])/2,tmpGuai.property['fangyu'],tmpGuai.property['sudu'],tmpGuai.property['shengming']);tmpGuai.__tmp_fight_compute={life:Math.ceil(ret.life),time:Math.ceil(ret.time),attNum:Math.ceil(ret.attNum)};guaiwuArray.push(tmpGuai);}}}}
guaiwuArray.sort(function(p_guai_1,p_guai_2){return parseInt(p_guai_1.__tmp_fight_compute.life)-parseInt(p_guai_2.__tmp_fight_compute.life);});innerHtml.append("<table cellpadding='1' cellspacing='1'><tr>").append("<th rowspan='2'><nobr>图像</nobr></th>").append("<th rowspan='2'><nobr>生命</nobr></th>").append("<th rowspan='2'><nobr>攻击</nobr></th>").append("<th rowspan='2'><nobr>防御</nobr></th>").append("<th rowspan='2'><nobr>速度</nobr></th>").append("<th rowspan='2'><nobr>金币</nobr></th>").append("<th rowspan='2'><nobr>经验</nobr></th>").append("<th colspan='2'>战斗计算</th>");innerHtml.append("</tr>");innerHtml.append("<tr><th><nobr>损失</nobr></th><th><nobr>次数</nobr></th></th></tr>");for(i=0;i<guaiwuArray.length;i++){var tmpGuaiArrayGuai=guaiwuArray[i];innerHtml.append("<tr>");innerHtml.append("<td><img src='").append(tmpGuaiArrayGuai.image).append("' alt='").append(tmpGuaiArrayGuai.name).append("' /></td>");innerHtml.append("<td><nobr>").append(tmpGuaiArrayGuai.property['shengming']).append("</nobr></td>");innerHtml.append("<td><nobr>").append(tmpGuaiArrayGuai.property['gongjiMin']).append("-").append(tmpGuaiArrayGuai.property['gongjiMax']).append("</nobr></td>");innerHtml.append("<td><nobr>").append(tmpGuaiArrayGuai.property['fangyu']).append("</nobr></td>");innerHtml.append("<td><nobr>").append(tmpGuaiArrayGuai.property['sudu']).append("</nobr></td>");innerHtml.append("<td><nobr>").append(tmpGuaiArrayGuai.property['jinbiMin']).append("-").append(tmpGuaiArrayGuai.property['jinbiMax']).append("</nobr></td>");innerHtml.append("<td><nobr>").append(tmpGuaiArrayGuai.property['jingyanMin']).append("-").append(tmpGuaiArrayGuai.property['jingyanMax']).append("</nobr></td>");innerHtml.append("<td><nobr>").append(tmpGuaiArrayGuai.__tmp_fight_compute.life).append("</nobr></td>");innerHtml.append("<td><nobr>").append(tmpGuaiArrayGuai.__tmp_fight_compute.attNum).append("</nobr></td>");innerHtml.append("</tr>");}
innerHtml.append("</table>");this.pageContainer.attr("innerHTML",innerHtml.toString());this.pageContainer.css('display','block');if(p_action){p_action();}};ViewGuaiWin.prototype.close=function(p_action){this.player.isMoveing=true;this.player.isViewGuai=false;this.pageContainer.css('display','none');if(p_action){p_action();}};function StringBuffer(){this.__strings__=new Array();}
StringBuffer.prototype.append=function(str){this.__strings__.push(str);return this;};StringBuffer.prototype.toString=function(){return this.__strings__.join("");};function SpeakDialogWin(p_player){this.player=p_player;this.pageContainer=$('<div/>');this.pageContainer.append($('<div id="speakDialogInner"></div>')).append($('<div>******【按空格继续】******</div>')).addClass('speakDialogCss').css('display','none');}
SpeakDialogWin.prototype.show=function(p_msg,p_action){this.player.isMoveing=false;this.player.isSpeaking=true;$("#speakDialogInner",this.pageContainer).attr("innerHTML",p_msg);this.pageContainer.css('display','block');if(p_action){p_action();}};SpeakDialogWin.prototype.close=function(p_action){this.player.isMoveing=true;this.player.isSpeaking=false;this.pageContainer.css('display','none');if(p_action){p_action();}};function PlayerObj(){this.property=new Array();this.property['dengji']=0;this.property['shengming']=1500;this.property['gongjiMin']=10;this.property['gongjiMax']=15;this.property['fangyu']=10;this.property['jinbi']=0;this.property['jingyan']=0;this.property['sudu']=100;this.property['huangyaoshi']=1;this.property['lanyaoshi']=1;this.property['hongyaoshi']=1;this.property['floor']=0;this.property['shiqi']=getRandomInt(0,20);this.property['xingyun']=getRandomInt(0,20);this.property['fuyuan']=getRandomInt(0,20);this.visitMaxFloor=0;this.pagePlayer=$("<div/>").addClass("player");this.imageUp=IMAGE_PATH+"player_1.jpg";this.imageDown=IMAGE_PATH+"player_2.jpg";this.imageLeft=IMAGE_PATH+"player_3.jpg";this.imageRight=IMAGE_PATH+"player_4.jpg";this.isMoveing=true;this.isSpeaking=false;this.isFighting=false;this.isViewGuai=false;this.isGouMai=false;this.goods=new Array();this.goods['shizijia']=0;this.goods['viewGuaiBook']=0;this.goods['chutou']=0;this.goods['feixingqi']=0;this.goods['damowang']=0;this.dialogObject=null;}
PlayerObj.prototype.updatePageInfo=function(){$('#dengji span').text(this.property['dengji']);$('#shengming span').text(this.property['shengming']);$('#gongji span').text(this.property['gongjiMin']+" - "+this.property['gongjiMax']);$('#fangyu span').text(this.property['fangyu']);$('#sudu span').text(this.property['sudu']);$('#jinbi span').text(this.property['jinbi']);$('#jingyan span').text(this.property['jingyan']);$('#huangKey span').text(this.property['huangyaoshi']);$('#lanKey span').text(this.property['lanyaoshi']);$('#hongKey span').text(this.property['hongyaoshi']);$('#floor span').text(this.property['floor']);$('#shiqi span').text(this.property['shiqi']);$('#xingyun span').text(this.property['xingyun']);$('#fuyuan span').text(this.property['fuyuan']);};PlayerObj.prototype.moveUpDown=function(p_up_down,p_can_move){var tmpLocation=new Location(this.location.x,this.location.y);var moveFlag;if(p_up_down==0){this.pagePlayer.css("background-image","url('"+this.imageUp+"')");moveFlag=-1;}else{this.pagePlayer.css("background-image","url('"+this.imageDown+"')");moveFlag=1;}
tmpLocation.y=tmpLocation.y+moveFlag;if(p_can_move(tmpLocation)){this.location=tmpLocation;this.pagePlayer.css('top',this.location.y*GRID_HEIGHT);}};PlayerObj.prototype.moveLeftRight=function(p_left_right,p_can_move){var tmpLocation=new Location(this.location.x,this.location.y);var moveFlag;if(p_left_right==0){this.pagePlayer.css("background-image","url('"+this.imageLeft+"')");moveFlag=-1;}else{this.pagePlayer.css("background-image","url('"+this.imageRight+"')");moveFlag=1;}
tmpLocation.x=tmpLocation.x+moveFlag;if(p_can_move(tmpLocation)){this.location=tmpLocation;this.pagePlayer.css('left',this.location.x*GRID_WIDTH);}};function NPC(p_id,p_image_id,p_speak_array){this.id=p_id;this.imageId=p_image_id;this.image=IMAGE_PATH+p_image_id+".jpg";this.speakArray=p_speak_array;this.viewSpeakNum=new Array();this.visitNum=0;this.action=0;this.jiangli=new Array();for(var i=0;i<p_speak_array.length;i++){this.viewSpeakNum[i]=0;}}
NPC.prototype.getSpeakMsg=function(){return this.speakArray[this.visitNum].speaking[this.viewSpeakNum[this.visitNum]];};NPC.prototype.isSpeakEnd=function(){if(this.speakArray[this.visitNum].speaking.length==this.viewSpeakNum[this.visitNum]+1){return true;}else{this.viewSpeakNum[this.visitNum]++;return false;}};NPC.prototype.geiyuJiangLi=function(p_player){if(!this.speakArray[this.action].geiyu){addPlayerProperty(p_player,null,{des:"",property_array:this.speakArray[this.action].jiangli},null);this.speakArray[this.action].geiyu=true;p_player.updatePageInfo();}};NPC.prototype.clone=function(){return new NPC(this.id,this.imageId,this.speakArray);};function BaseViewGoods(p_id,p_name,p_image_id,p_gain_goods_obj){this.id=p_id;this.name=p_name;this.imageId=p_image_id;this.image=IMAGE_PATH+p_image_id+".jpg";this.gainGoodsObj=p_gain_goods_obj;}
BaseViewGoods.prototype.clone=function(){return new BaseViewGoods(this.id,this.name,this.imageId,this.gainGoodsObj);};function getTipWordMsg(p_msg,p_tipword_array,p_tipword_color,p_tip_word_size){var beginPosition=p_msg.indexOf("{");var endPosition=p_msg.indexOf("}");var tmpStr=p_msg;var ret="";if(beginPosition>=0&&endPosition>=0){var i=0;while(beginPosition>=0&&endPosition>=0){ret+=tmpStr.substring(0,beginPosition);ret+="<span style='color:"+(p_tipword_color?p_tipword_color:"black")+";font-size:"+(p_tip_word_size?p_tip_word_size:"9pt")+";'>"+p_tipword_array[i]+"</span>";tmpStr=tmpStr.substring(endPosition+1,tmpStr.length);beginPosition=tmpStr.indexOf("{");endPosition=tmpStr.indexOf("}");i++;}
ret+=tmpStr;}else{ret=p_msg;}
return ret;}
function getRandomInt(p_min,p_max){return parseInt(Math.random()*(p_max-p_min+1)+p_min);}
function computeFightLossLife(p_player_att,p_player_def,p_player_speed,p_guai_att,p_guai_def,p_guai_speed,p_guai_life){var playerAttPer=p_player_att-p_guai_def;if(playerAttPer<=0)playerAttPer=1;var playerKillGuaiNum=Math.ceil(p_guai_life/playerAttPer);var playerKillGuaiTime=playerKillGuaiNum*p_player_speed;var guaiAttNum=Math.floor(playerKillGuaiTime/p_guai_speed);var guaiAttPer=p_guai_att-p_player_def;if(guaiAttPer<=0)guaiAttPer=1;var playerLossLife=guaiAttPer*guaiAttNum;return{life:playerLossLife,time:playerKillGuaiTime,attNum:playerKillGuaiNum};}
function addPlayerProperty(p_player,p_speak_dialog,p_add_property_obj,p_condition_obj){if(p_condition_obj){if(p_player.property[p_condition_obj.property]>=p_condition_obj.value){p_player.property[p_condition_obj.property]-=p_condition_obj.value;__addPlayerProperty(p_player,p_speak_dialog,p_add_property_obj);return true;}else{if(p_speak_dialog&&$.trim(p_condition_obj.des)!=""){p_speak_dialog.show(p_condition_obj.des);}
return false;}}else{__addPlayerProperty(p_player,p_speak_dialog,p_add_property_obj);return true;}}
function __addPlayerProperty(p_player,p_speak_dialog,p_add_property_obj){if(p_add_property_obj){var tmpDesArray=new Array();for(var i=0;i<p_add_property_obj.property_array.length;i++){var tmpPropertyObj=p_add_property_obj.property_array[i];var tmpValue=getRandomInt(tmpPropertyObj.min,tmpPropertyObj.max);if(tmpPropertyObj.am=="add"){p_player.property[tmpPropertyObj.property]+=tmpValue;}else{p_player.property[tmpPropertyObj.property]-=tmpValue;if(p_player.property[tmpPropertyObj.property]<tmpPropertyObj.mmin)
p_player.property[tmpPropertyObj.property]=tmpPropertyObj.mmin;}
tmpDesArray.push(tmpValue);}
if(p_speak_dialog&&$.trim(p_add_property_obj.des)!=""){p_speak_dialog.show(getTipWordMsg(p_add_property_obj.des,tmpDesArray,"red","11pt"));}}}
function finishDongHua(p_guai){$(document).unbind("keydown",keyDownInDocument);var finishDiv=$("<div/>").addClass("finishInnerDiv").css("display","none");var authInfo=$("<div/>").addClass("finishInnerDiv").css("display","none").attr("innerHTML","作者：杜津浩<br>游戏素材来自网络！<br>游戏内容根据原魔塔修改！");var restartdiv=$("<div/>").addClass("finishReStartDiv").css("display","none").text("重新开始").click(function(){window.location="mota.html";}).hover(function(){$(this).addClass("finishReStartHover");},function(){$(this).removeClass("finishReStartHover");});$("#gameFrame").css("background","url('"+IMAGE_PATH+"506.jpg') repeat").attr("innerHTML","").append(finishDiv).append(authInfo).append(restartdiv);if(p_guai){finishDiv.attr("innerHTML","你不幸被"+p_guai.name+"杀死，公主无法救出！<br>多年以后公主被迫嫁给了终极魔王，世界一片混乱！")}else{finishDiv.attr("innerHTML","经过你的不懈努力，终于把公主从魔塔中救出！<br>多年以后公主嫁给了勇士，他们过着幸福的生活！")}
finishDiv.fadeIn(1000,function(){authInfo.slideDown(1000,function(){restartdiv.show(1000);});});}
function initHtmlContent(){document.body.innerHTML='<table align="center" height="416" style="background-color:#006400;">'+'<tr>'+'<td style="width:32px;"></td>'+'<td>'+'<div style="width:138px;height:352px;background: url(\''+IMAGE_PATH+'509.jpg\') repeat;">'+'<ul style="list-style:none;margin-left:16px;margin-top:16px;">'+'<li id="dengji" class="playerinfotext">等级：<span></span></li>'+'<li id="shengming" class="playerinfotext">生命：<span></span></li>'+'<li id="gongji" class="playerinfotext">攻击：<span></span></li>'+'<li id="fangyu" class="playerinfotext">防御：<span></span></li>'+'<li id="sudu" class="playerinfotext">速度：<span></span></li>'+'<li id="jinbi" class="playerinfotext">金币：<span></span></li>'+'<li id="jingyan" class="playerinfotext">经验：<span></span></li>'+'<li id="shiqi" class="playerinfotext" title="战斗中出现的最大攻击，士气越高，最大攻击次数越多">士气：<span></span></li>'+'<li id="xingyun" class="playerinfotext" title="战斗结束后获得的金币与经验，幸运越高，获得最高金币与经验的可能越大">幸运：<span></span></li>'+'<li id="fuyuan" class="playerinfotext" title="战斗中出现的特殊攻击，福缘越高，特殊攻击次数越多">福缘：<span></span></li>'+'<li id="huangKey" class="playerinfotext"><img src="'+IMAGE_PATH+'301.jpg" alt="黄钥匙" style="width:20px;height:20px;">：<span></span></li>'+'<li id="lanKey" class="playerinfotext"><img src="'+IMAGE_PATH+'302.jpg" alt="蓝钥匙" style="width:20px;height:20px;">：<span></span></li>'+'<li id="hongKey" class="playerinfotext"><img src="'+IMAGE_PATH+'303.jpg" alt="红钥匙" style="width:20px;height:20px;">：<span></span></li>'+'<li id="floor" class="playerinfotext">楼层：<span></span></li>'+'</ul>'+'</div>'+'</td>'+'<td style="width:32px;"></td>'+'<td>'+'<div id="gameFrame">'+'</div>'+'</td>'+'<td style="width:32px;"></td>'+'<td id="motaDebugTd" style="display:none">'+'</td>'+'</tr>'+'</table>';}
function initFillGoods(p_goods_array){p_goods_array[0]=new GuaiWu(0,"小史莱姆",0,[{name:"shengming",value:110},{name:"gongjiMin",value:13},{name:"gongjiMax",value:18},{name:"fangyu",value:2},{name:"sudu",value:100},{name:"jinbiMin",value:2},{name:"jinbiMax",value:5},{name:"jingyanMin",value:2},{name:"jingyanMax",value:4}]);p_goods_array[1]=new GuaiWu(1,"红史莱姆",1,[{name:"shengming",value:140},{name:"gongjiMin",value:17},{name:"gongjiMax",value:22},{name:"fangyu",value:4},{name:"sudu",value:99},{name:"jinbiMin",value:3},{name:"jinbiMax",value:8},{name:"jingyanMin",value:3},{name:"jingyanMax",value:5}]);p_goods_array[2]=new GuaiWu(2,"黑史莱姆",2,[{name:"shengming",value:300},{name:"gongjiMin",value:48},{name:"gongjiMax",value:58},{name:"fangyu",value:33},{name:"sudu",value:96},{name:"jinbiMin",value:10},{name:"jinbiMax",value:25},{name:"jingyanMin",value:10},{name:"jingyanMax",value:18}]);p_goods_array[3]=new GuaiWu(3,"小蝙蝠",3,[{name:"shengming",value:150},{name:"gongjiMin",value:21},{name:"gongjiMax",value:25},{name:"fangyu",value:5},{name:"sudu",value:98},{name:"jinbiMin",value:5},{name:"jinbiMax",value:13},{name:"jingyanMin",value:5},{name:"jingyanMax",value:9}]);p_goods_array[4]=new GuaiWu(4,"骷髅兵",4,[{name:"shengming",value:183},{name:"gongjiMin",value:25},{name:"gongjiMax",value:30},{name:"fangyu",value:10},{name:"sudu",value:97},{name:"jinbiMin",value:7},{name:"jinbiMax",value:18},{name:"jingyanMin",value:7},{name:"jingyanMax",value:13}]);p_goods_array[5]=new GuaiWu(5,"骷髅剑士",5,[{name:"shengming",value:330},{name:"gongjiMin",value:68},{name:"gongjiMax",value:80},{name:"fangyu",value:40},{name:"sudu",value:94},{name:"jinbiMin",value:14},{name:"jinbiMax",value:35},{name:"jingyanMin",value:14},{name:"jingyanMax",value:25}]);p_goods_array[6]=new GuaiWu(6,"初级法师",6,[{name:"shengming",value:200},{name:"gongjiMin",value:80},{name:"gongjiMax",value:150},{name:"fangyu",value:20},{name:"sudu",value:95},{name:"jinbiMin",value:12},{name:"jinbiMax",value:30},{name:"jingyanMin",value:12},{name:"jingyanMax",value:22}]);p_goods_array[7]=new GuaiWu(7,"兽人",7,[{name:"shengming",value:650},{name:"gongjiMin",value:200},{name:"gongjiMax",value:240},{name:"fangyu",value:140},{name:"sudu",value:91},{name:"jinbiMin",value:20},{name:"jinbiMax",value:50},{name:"jingyanMin",value:20},{name:"jingyanMax",value:36}]);p_goods_array[8]=new GuaiWu(8,"初级僧侣",8,[{name:"shengming",value:350},{name:"gongjiMin",value:300},{name:"gongjiMax",value:700},{name:"fangyu",value:70},{name:"sudu",value:90},{name:"jinbiMin",value:22},{name:"jinbiMax",value:55},{name:"jingyanMin",value:22},{name:"jingyanMax",value:40}]);p_goods_array[9]=new GuaiWu(9,"大蝙蝠",9,[{name:"shengming",value:340},{name:"gongjiMin",value:80},{name:"gongjiMax",value:100},{name:"fangyu",value:50},{name:"sudu",value:93},{name:"jinbiMin",value:15},{name:"jinbiMax",value:38},{name:"jingyanMin",value:15},{name:"jingyanMax",value:27}]);p_goods_array[10]=new GuaiWu(10,"吸血蝙蝠",10,[{name:"shengming",value:900},{name:"gongjiMin",value:480},{name:"gongjiMax",value:630},{name:"fangyu",value:220},{name:"sudu",value:87},{name:"jinbiMin",value:28},{name:"jinbiMax",value:70},{name:"jingyanMin",value:28},{name:"jingyanMax",value:50}]);p_goods_array[11]=new GuaiWu(11,"骷髅武士",11,[{name:"shengming",value:700},{name:"gongjiMin",value:160},{name:"gongjiMax",value:200},{name:"fangyu",value:120},{name:"sudu",value:92},{name:"jinbiMin",value:17},{name:"jinbiMax",value:43},{name:"jingyanMin",value:17},{name:"jingyanMax",value:31}]);p_goods_array[12]=new GuaiWu(12,"高级僧侣",12,[{name:"shengming",value:1000},{name:"gongjiMin",value:700},{name:"gongjiMax",value:1100},{name:"fangyu",value:200},{name:"sudu",value:84},{name:"jinbiMin",value:33},{name:"jinbiMax",value:83},{name:"jingyanMin",value:33},{name:"jingyanMax",value:59}]);p_goods_array[13]=new GuaiWu(13,"石头怪",13,[{name:"shengming",value:1550},{name:"gongjiMin",value:400},{name:"gongjiMax",value:450},{name:"fangyu",value:400},{name:"sudu",value:85},{name:"jinbiMin",value:31},{name:"jinbiMax",value:78},{name:"jingyanMin",value:31},{name:"jingyanMax",value:56}]);p_goods_array[14]=new GuaiWu(14,"初级卫兵",14,[{name:"shengming",value:750},{name:"gongjiMin",value:300},{name:"gongjiMax",value:400},{name:"fangyu",value:120},{name:"sudu",value:89},{name:"jinbiMin",value:25},{name:"jinbiMax",value:63},{name:"jingyanMin",value:25},{name:"jingyanMax",value:45}]);p_goods_array[15]=new GuaiWu(15,"骑士卫兵",15,[{name:"shengming",value:1450},{name:"gongjiMin",value:640},{name:"gongjiMax",value:800},{name:"fangyu",value:500},{name:"sudu",value:83},{name:"jinbiMin",value:35},{name:"jinbiMax",value:88},{name:"jingyanMin",value:35},{name:"jingyanMax",value:63}]);p_goods_array[16]=new GuaiWu(16,"双手剑士",16,[{name:"shengming",value:2650},{name:"gongjiMin",value:1300},{name:"gongjiMax",value:1800},{name:"fangyu",value:1200},{name:"sudu",value:73},{name:"jinbiMin",value:65},{name:"jinbiMax",value:163},{name:"jingyanMin",value:65},{name:"jingyanMax",value:117}]);p_goods_array[17]=new GuaiWu(17,"中级法师",17,[{name:"shengming",value:800},{name:"gongjiMin",value:500},{name:"gongjiMax",value:900},{name:"fangyu",value:150},{name:"sudu",value:86},{name:"jinbiMin",value:30},{name:"jinbiMax",value:75},{name:"jingyanMin",value:30},{name:"jingyanMax",value:54}]);p_goods_array[18]=new GuaiWu(18,"大法卫兵",18,[{name:"shengming",value:1400},{name:"gongjiMin",value:600},{name:"gongjiMax",value:900},{name:"fangyu",value:470},{name:"sudu",value:82},{name:"jinbiMin",value:40},{name:"jinbiMax",value:100},{name:"jingyanMin",value:40},{name:"jingyanMax",value:72}]);p_goods_array[19]=new GuaiWu(19,"狂暴骑士",19,[{name:"shengming",value:2200},{name:"gongjiMin",value:900},{name:"gongjiMax",value:1200},{name:"fangyu",value:700},{name:"sudu",value:79},{name:"jinbiMin",value:50},{name:"jinbiMax",value:125},{name:"jingyanMin",value:50},{name:"jingyanMax",value:90}]);p_goods_array[20]=new GuaiWu(20,"兽武士",20,[{name:"shengming",value:2100},{name:"gongjiMin",value:800},{name:"gongjiMax",value:1000},{name:"fangyu",value:600},{name:"sudu",value:80},{name:"jinbiMin",value:45},{name:"jinbiMax",value:113},{name:"jingyanMin",value:45},{name:"jingyanMax",value:81}]);p_goods_array[21]=new GuaiWu(21,"中级卫兵",21,[{name:"shengming",value:2400},{name:"gongjiMin",value:1000},{name:"gongjiMax",value:1300},{name:"fangyu",value:900},{name:"sudu",value:78},{name:"jinbiMin",value:55},{name:"jinbiMax",value:138},{name:"jingyanMin",value:55},{name:"jingyanMax",value:99}]);p_goods_array[22]=new GuaiWu(22,"高级卫兵",22,[{name:"shengming",value:2600},{name:"gongjiMin",value:1200},{name:"gongjiMax",value:1600},{name:"fangyu",value:1100},{name:"sudu",value:75},{name:"jinbiMin",value:60},{name:"jinbiMax",value:150},{name:"jingyanMin",value:60},{name:"jingyanMax",value:108}]);p_goods_array[23]=new GuaiWu(23,"骷髅王",23,[{name:"shengming",value:4500},{name:"gongjiMin",value:1800},{name:"gongjiMax",value:2400},{name:"fangyu",value:1600},{name:"sudu",value:69},{name:"jinbiMin",value:80},{name:"jinbiMax",value:200},{name:"jingyanMin",value:80},{name:"jingyanMax",value:144}]);p_goods_array[24]=new GuaiWu(24,"冥卫兵",24,[{name:"shengming",value:2750},{name:"gongjiMin",value:1500},{name:"gongjiMax",value:2100},{name:"fangyu",value:1500},{name:"sudu",value:72},{name:"jinbiMin",value:70},{name:"jinbiMax",value:175},{name:"jingyanMin",value:70},{name:"jingyanMax",value:126}]);p_goods_array[25]=new GuaiWu(25,"暗夜骑士",25,[{name:"shengming",value:5800},{name:"gongjiMin",value:2200},{name:"gongjiMax",value:3000},{name:"fangyu",value:1800},{name:"sudu",value:68},{name:"jinbiMin",value:85},{name:"jinbiMax",value:213},{name:"jingyanMin",value:85},{name:"jingyanMax",value:153}]);p_goods_array[26]=new GuaiWu(26,"元素",26,[{name:"shengming",value:6800},{name:"gongjiMin",value:2400},{name:"gongjiMax",value:3600},{name:"fangyu",value:2100},{name:"sudu",value:65},{name:"jinbiMin",value:90},{name:"jinbiMax",value:225},{name:"jingyanMin",value:90},{name:"jingyanMax",value:162}]);p_goods_array[27]=new GuaiWu(27,"魔道士",27,[{name:"shengming",value:8500},{name:"gongjiMin",value:2600},{name:"gongjiMax",value:4000},{name:"fangyu",value:2300},{name:"sudu",value:60},{name:"jinbiMin",value:100},{name:"jinbiMax",value:250},{name:"jingyanMin",value:100},{name:"jingyanMax",value:180}]);p_goods_array[28]=new GuaiWu(28,"小魔王",28,[{name:"shengming",value:20000},{name:"gongjiMin",value:2000},{name:"gongjiMax",value:3000},{name:"fangyu",value:1800},{name:"sudu",value:60},{name:"jinbiMin",value:150},{name:"jinbiMax",value:375},{name:"jingyanMin",value:150},{name:"jingyanMax",value:270}]);p_goods_array[29]=new GuaiWu(29,"大史莱姆",29,[{name:"shengming",value:850},{name:"gongjiMin",value:330},{name:"gongjiMax",value:400},{name:"fangyu",value:220},{name:"sudu",value:88},{name:"jinbiMin",value:26},{name:"jinbiMax",value:65},{name:"jingyanMin",value:26},{name:"jingyanMax",value:47}]);p_goods_array[30]=new GuaiWu(30,"究极法师",30,[{name:"shengming",value:30000},{name:"gongjiMin",value:3000},{name:"gongjiMax",value:5000},{name:"fangyu",value:2700},{name:"sudu",value:55},{name:"jinbiMin",value:200},{name:"jinbiMax",value:500},{name:"jingyanMin",value:200},{name:"jingyanMax",value:360}]);p_goods_array[31]=new GuaiWu(31,"大魔王",31,[{name:"shengming",value:50000},{name:"gongjiMin",value:4000},{name:"gongjiMax",value:6000},{name:"fangyu",value:3800},{name:"sudu",value:50},{name:"jinbiMin",value:300},{name:"jinbiMax",value:750},{name:"jingyanMin",value:300},{name:"jingyanMax",value:540}]);p_goods_array[32]=new GuaiWu(32,"终极魔王",32,[{name:"shengming",value:120000},{name:"gongjiMin",value:5000},{name:"gongjiMax",value:8000},{name:"fangyu",value:4800},{name:"sudu",value:45},{name:"jinbiMin",value:500},{name:"jinbiMax",value:1250},{name:"jingyanMin",value:500},{name:"jingyanMax",value:900}]);p_goods_array[301]=new AddPropertyGoods(301,"黄钥匙",301,[{property:'huangyaoshi',min:1,max:1,am:"add",mmin:0}],"你捡起了一把黄钥匙！",null);p_goods_array[302]=new AddPropertyGoods(302,"蓝钥匙",302,[{property:'lanyaoshi',min:1,max:1,am:"add",mmin:0}],"你捡起了一把蓝钥匙！",null);p_goods_array[303]=new AddPropertyGoods(303,"红钥匙",303,[{property:'hongyaoshi',min:1,max:1,am:"add",mmin:0}],"你捡起了一把红钥匙！",null);p_goods_array[304]=new DaMen(304,"黄色大门",304,"huangyaoshi","你开启了一座黄色大门！","你的黄钥匙数量不够了！");p_goods_array[305]=new DaMen(305,"蓝色大门",305,'lanyaoshi',"你开启了一座蓝色大门！","你的蓝钥匙数量不够了！");p_goods_array[306]=new DaMen(306,"红色大门",306,'hongyaoshi',"你开启了一座红色大门！","你的红钥匙数量不够了！");p_goods_array[307]=new AddPropertyGoods(307,"蓝宝石",307,[{property:'gongjiMin',min:3,max:5,am:"add",mmin:0},{property:'gongjiMax',min:5,max:8,am:"add",mmin:0}],"你捡到了一颗蓝宝石，增加{0}-{1}点攻击！",null);p_goods_array[308]=new AddPropertyGoods(308,"红宝石",308,[{property:'fangyu',min:3,max:5,am:"add",mmin:0}],"你捡到了一颗红宝石，增加{0}点防御！",null);p_goods_array[309]=new AddPropertyGoods(309,"蓝血瓶",309,[{property:'shengming',min:500,max:750,am:"add",mmin:0}],"你捡到了一个蓝血瓶，增加{0}点生命！",null);p_goods_array[310]=new AddPropertyGoods(310,"红血瓶",310,[{property:'shengming',min:200,max:300,am:"add",mmin:0}],"你捡到了一个红血瓶，增加{0}点生命！",null);p_goods_array[311]=new BaseViewGoods(311,"怪物说明书",311,{property:"viewGuaiBook",des:"你捡到了一本{0}，按{1}可以查看怪物详细情况！",tipDes:["怪物说明书","L键"]});p_goods_array[312]=new AddPropertyGoods(312,"绿宝石",312,[{property:'sudu',min:1,max:2,am:"minus",mmin:10}],"你捡到了一颗绿宝石，增加{0}点速度！",null);p_goods_array[313]=new AddPropertyGoods(313,"碧波相露刀",313,[{property:'gongjiMin',min:10,max:15,am:"add",mmin:0},{property:'gongjiMax',min:15,max:24,am:"add",mmin:0}],"你捡到了一柄碧波相露刀，增加{0}-{1}点攻击！",null);p_goods_array[314]=new AddPropertyGoods(314,"黄金宝箱",314,[{property:'huangyaoshi',min:1,max:1,am:"add",mmin:0},{property:'lanyaoshi',min:1,max:1,am:"add",mmin:0},{property:'hongyaoshi',min:1,max:1,am:"add",mmin:0}],"你捡起了一个黄金宝箱，所有钥匙数量增加1！",null);p_goods_array[315]=new AddPropertyGoods(315,"铁盾",315,[{property:'fangyu',min:10,max:15,am:"add",mmin:0}],"你捡到了一柄铁盾，增加{0}点防御！",null);p_goods_array[316]=new AddPropertyGoods(316,"古代金币",316,[{property:'jinbi',min:400,max:600,am:"add",mmin:0}],"你捡到了一枚古代金币，增加了{0}金币！",null);p_goods_array[317]=new BaseViewGoods(317,"飞行器",317,{property:"feixingqi",des:"恭喜！你获得了{0}，按{1}向上飞行一层，按{2}向下飞行一层！",tipDes:["飞行器","W键","S键"]});p_goods_array[318]=new BaseViewGoods(318,"圣母十字架",318,{property:"shizijia",des:"恭喜！你获得了{0}，用它却解救{1}吧！",tipDes:["圣母十字架","精灵"]});p_goods_array[319]=new AddPropertyGoods(319,"幻影靴",319,[{property:'sudu',min:6,max:9,am:"minus",mmin:10}],"你捡到了一双幻影靴，速度增加{0}点！",null);p_goods_array[320]=new AddPropertyGoods(320,"真武剑",320,[{property:'gongjiMin',min:50,max:75,am:"add",mmin:0},{property:'gongjiMax',min:75,max:113,am:"add",mmin:0}],"你捡到了一柄真武剑，增加{0}-{1}点攻击！",null);p_goods_array[321]=new AddPropertyGoods(321,"骑士盾",321,[{property:'fangyu',min:50,max:75,am:"add",mmin:0}],"你捡到了一柄骑士盾，增加{0}点防御！",null);p_goods_array[322]=new BaseViewGoods(322,"锄头",322,{property:"chutou",des:"恭喜！你获得了{0}，把它交给{1}吧！",tipDes:["锄头","捷克"]});p_goods_array[323]=new AddPropertyGoods(323,"大血瓶",323,[{property:'shengming',min:3000,max:4500,am:"add",mmin:0}],"你捡到了一个大血瓶，增加{0}点生命！",null);p_goods_array[324]=new AddPropertyGoods(324,"圣水",324,[],"你捡到了一瓶{0}，生命增加一倍！",null);p_goods_array[325]=new AddPropertyGoods(325,"圣剑",325,[{property:'gongjiMin',min:400,max:600,am:"add",mmin:0},{property:'gongjiMax',min:600,max:900,am:"add",mmin:0}],"你捡到了一柄圣剑，增加{0}-{1}点攻击！",null);p_goods_array[326]=new AddPropertyGoods(326,"圣盾",326,[{property:'fangyu',min:400,max:600,am:"add",mmin:0}],"你捡到了一柄圣盾，增加{0}点防御！",null);p_goods_array[501]=new BaseGoods(501,"普通墙",501);p_goods_array[502]=new BaseGoods(502,"升级墙左",502);p_goods_array[503]=new BaseGoods(503,"升级墙右",503);p_goods_array[504]=new BaseGoods(504,"花色门",504);p_goods_array[505]=new BaseGoods(505,"岩浆墙",505);p_goods_array[506]=new BaseGoods(506,"星星墙",506);p_goods_array[507]=new BaseGoods(507,"上楼楼梯",507);p_goods_array[508]=new BaseGoods(508,"下楼楼梯",508);p_goods_array[509]=new BaseGoods(509,"路",509);p_goods_array[510]=new BaseGoods(510,"栅栏门",510);p_goods_array[601]=new NPC(601,601,[{speaking:['精灵：你好！勇士！我是这里的精灵！','你好，精灵！','精灵：你就是被派遣到魔塔里搭救公主的勇士？','精灵：我们的公主被困在魔塔的顶层，那里有个可怕的大魔王看守！','精灵：我现在被大魔王禁锢在这里，如果可以找到”圣母十字架“，我就可离开这里并把我的传功给你？',"精灵：我现在有黄、蓝、红三把钥匙，我把钥匙送给你！",'精灵：加油勇士，一定要救出公主！'],jiangli:[{property:'huangyaoshi',min:1,max:1,am:"add",mmin:0},{property:'lanyaoshi',min:1,max:1,am:"add",mmin:0},{property:'hongyaoshi',min:1,max:1,am:"add",mmin:0},{property:'shiqi',min:1,max:5,am:"add",mmin:0},{property:'xingyun',min:1,max:5,am:"add",mmin:0},{property:'fuyuan',min:1,max:5,am:"add",mmin:0}],geiyu:false,xuyaowupin:""},{speaking:["精灵：很好，你找到了”圣母十字架“，我从新重新获得自由！","精灵：为了答谢你，我把我毕生的功力传给你！","只见精灵灵光闪动，把她的毕生的功力传给你，最后他对你说了一句话：”一定要救出公主，杀死大魔王！！“"],jiangli:[{property:"shengming",min:2000,max:3000,am:"add",mmin:0},{property:'gongjiMin',min:150,max:225,am:"add",mmin:0},{property:'gongjiMax',min:225,max:338,am:"add",mmin:0},{property:'fangyu',min:188,max:182,am:"add",mmin:0},{property:'sudu',min:5,max:10,am:"minus",mmin:10},{property:'shiqi',min:1,max:5,am:"add",mmin:0},{property:'xingyun',min:1,max:5,am:"add",mmin:0},{property:'fuyuan',min:1,max:5,am:"add",mmin:0}],geiyu:false,xuyaowupin:"shizijia"}]);p_goods_array[602]=new NPC(602,602,[{speaking:["捷克：你好，我是捷克！","你好，捷克！","捷克：感谢你救了我！为了答谢你，我将为你打开第2层的机关门！","捷克：对了，我知道他们把公主关在哪里！","捷克：我需要一柄锄头，帮你打开关公主的墙壁！","捷克：如果你找到锄头，还可以来这里找我，我将为你打开墙壁！","捷克：祝你好运！"],jiangli:[{property:'shiqi',min:1,max:5,am:"add",mmin:0},{property:'xingyun',min:1,max:5,am:"add",mmin:0},{property:'fuyuan',min:1,max:5,am:"add",mmin:0}],geiyu:false,xuyaowupin:""},{speaking:["捷克：很好，你找到了锄头！","捷克：我将帮你打开关公主的墙壁！","捷克：再见！"],jiangli:[{property:'shiqi',min:1,max:5,am:"add",mmin:0},{property:'xingyun',min:1,max:5,am:"add",mmin:0},{property:'fuyuan',min:1,max:5,am:"add",mmin:0}],geiyu:false,xuyaowupin:"chutou"}]);p_goods_array[603]=new AddPropertyGoods(603,"老人蓝2层",603,[{property:'gongjiMin',min:80,max:120,am:"add",mmin:0},{property:'gongjiMax',min:120,max:180,am:"add",mmin:0},{property:'shiqi',min:1,max:5,am:"add",mmin:0},{property:'xingyun',min:1,max:5,am:"add",mmin:0},{property:'fuyuan',min:1,max:5,am:"add",mmin:0}],"老人：谢谢你救了我！作为答谢我送你一只大剑，可增加{0}-{1}点攻击力！",null);p_goods_array[604]=new AddPropertyGoods(604,"老人红2层",604,[{property:'fangyu',min:80,max:120,am:"add",mmin:0},{property:'shiqi',min:1,max:5,am:"add",mmin:0},{property:'xingyun',min:1,max:5,am:"add",mmin:0},{property:'fuyuan',min:1,max:5,am:"add",mmin:0}],"老人：谢谢你救了我！作为答谢我送你一只铁盾，可增加{0}点防御力！",null);p_goods_array[605]=new BaseGoods(605,"升级墙3层",605);p_goods_array[606]=new NPC(606,606,[{speaking:['公主：你好！勇士！你是来救我的吗！','你好，公主！，我就是来就您的，我是您的勇士！','公主：大魔王就在上面，我被他施法禁锢在这里，无法移动！','公主：勇士，你一定要杀死大魔王，我们才能离开这里！','公主给了你一个深情的吻，你的所有属性全部增加！！','公主：一定要杀死大魔王！'],jiangli:[{property:"shengming",min:5000,max:7500,am:"add",mmin:0},{property:'gongjiMin',min:200,max:350,am:"add",mmin:0},{property:'gongjiMax',min:350,max:525,am:"add",mmin:0},{property:'fangyu',min:200,max:350,am:"add",mmin:0},{property:'sudu',min:8,max:16,am:"minus",mmin:10},{property:'huangyaoshi',min:1,max:10,am:"add",mmin:0},{property:'lanyaoshi',min:1,max:10,am:"add",mmin:0},{property:'hongyaoshi',min:1,max:10,am:"add",mmin:0},{property:'shiqi',min:10,max:25,am:"add",mmin:0},{property:'xingyun',min:10,max:25,am:"add",mmin:0},{property:'fuyuan',min:10,max:25,am:"add",mmin:0}],geiyu:false,xuyaowupin:""},{speaking:["公主：太好了勇士，你终于杀死了大魔王！！“"],jiangli:[],geiyu:false,xuyaowupin:"damowang"}]);p_goods_array[650]=new BaseGoods(650,"老人蓝5层经验商店",603);p_goods_array[651]=new BaseGoods(651,"老人红5层买钥匙商店",604);p_goods_array[652]=new BaseGoods(652,"升级墙11层",605);p_goods_array[653]=new BaseGoods(653,"老人红12层收购钥匙商店",604);p_goods_array[654]=new BaseGoods(654,"老人蓝13层高级经验商店",603);p_goods_array[655]=new AddPropertyGoods(655,"老人红15层增加攻击老人",604,[{property:'gongjiMin',min:200,max:300,am:"add",mmin:0},{property:'gongjiMax',min:300,max:450,am:"add",mmin:0},{property:'shiqi',min:1,max:5,am:"add",mmin:0},{property:'xingyun',min:1,max:5,am:"add",mmin:0},{property:'fuyuan',min:1,max:5,am:"add",mmin:0}],"我将提升你{0}-{1}点攻击并扣除你1200金币！",{property:"jinbi",value:1200,des:"等你有了1200金币在来找我！"});p_goods_array[656]=new AddPropertyGoods(656,"老人蓝15层增加防御老人",603,[{property:'fangyu',min:200,max:300,am:"add",mmin:0},{property:'shiqi',min:1,max:5,am:"add",mmin:0},{property:'xingyun',min:1,max:5,am:"add",mmin:0},{property:'fuyuan',min:1,max:5,am:"add",mmin:0}],"我将提升你{0}点防御并扣除你800经验！",{property:"jingyan",value:800,des:"等你有了800经验在来找我！"});}
function initMap(p_map_array,p_goods_array){p_map_array[0]=new Map(0,[[501,506,506,506,506,507,506,506,506,506,501],[501,506,506,506,506,509,506,506,506,506,501],[501,506,506,506,506,509,506,506,506,506,501],[501,506,506,506,506,509,506,506,506,506,501],[501,506,506,506,506,509,506,506,506,506,501],[501,506,506,506,506,509,506,506,506,506,501],[501,501,506,506,506,509,506,506,506,501,501],[501,501,501,501,501,304,501,501,501,501,501],[505,501,505,501,601,509,312,501,505,501,505],[505,505,505,505,505,509,505,505,505,505,505],[505,505,505,505,505,509,505,505,505,505,505]],new Location(5,10),new Location(5,1),p_goods_array);p_map_array[1]=new Map(1,[[507,509,301,0,1,0,509,509,509,509,509],[501,501,501,501,501,501,501,501,501,501,509],[310,509,4,304,509,501,310,301,310,501,509],[310,4,308,501,509,501,310,301,310,501,509],[501,304,501,501,509,501,501,501,2,501,509],[301,5,307,501,509,304,6,0,3,501,509],[309,312,302,501,509,501,501,501,501,501,509],[501,304,501,501,509,509,509,509,509,509,509],[311,5,307,501,501,306,501,501,501,304,501],[310,309,301,501,303,509,509,501,301,7,302],[310,308,301,501,509,508,509,501,301,301,301]],new Location(5,9),new Location(1,0),p_goods_array);p_map_array[2]=new Map(2,[[508,501,509,19,509,501,308,307,301,303,501],[509,501,307,501,309,501,308,307,301,302,501],[509,501,301,501,301,501,308,307,301,15,501],[509,501,301,501,301,501,501,501,501,304,501],[509,501,509,501,509,509,509,304,509,509,501],[509,501,304,501,501,304,501,501,304,501,501],[509,504,509,509,509,509,501,509,15,509,501],[509,501,304,501,501,305,501,510,501,510,501],[509,501,301,501,309,310,501,312,501,312,501],[509,501,301,501,309,310,501,509,501,509,501],[507,501,308,501,309,310,501,603,501,604,501]],new Location(0,1),new Location(0,9),p_goods_array);p_map_array[3]=new Map(3,[[313,1,301,501,502,605,503,501,501,501,501],[1,301,312,501,509,509,509,501,509,3,509],[301,4,509,501,501,304,501,501,509,501,509],[501,304,501,501,509,4,509,501,301,501,1],[509,509,509,501,501,501,509,501,301,501,3],[0,501,509,3,1,3,509,501,301,501,1],[0,501,501,501,501,501,509,509,509,501,509],[509,509,509,509,509,501,501,304,501,501,509],[501,501,501,501,3,501,1,509,0,501,509],[501,509,509,509,509,501,307,3,301,501,509],[508,509,501,501,501,501,308,309,301,501,507]],new Location(1,10),new Location(10,9),p_goods_array);p_map_array[4]=new Map(4,[[509,2,509,501,509,602,509,501,509,2,509],[304,501,304,501,509,312,509,501,304,501,304],[509,501,509,501,501,510,501,501,509,501,509],[509,501,4,501,9,10,9,501,4,501,509],[3,501,310,501,307,9,308,501,310,501,3],[3,501,310,501,501,306,501,501,310,501,3],[1,501,509,501,7,14,7,501,509,501,1],[509,501,509,501,307,7,308,501,509,501,509],[509,501,509,501,501,305,501,501,509,501,509],[509,501,509,501,301,509,301,501,509,501,509],[507,501,509,2,509,509,509,2,509,501,508]],new Location(10,9),new Location(0,9),p_goods_array);p_map_array[5]=new Map(5,[[314,501,310,501,309,6,509,509,6,301,302],[509,501,307,501,6,509,509,509,6,312,301],[9,501,509,501,5,509,501,501,304,501,501],[509,304,6,501,315,5,501,509,7,5,651],[9,501,509,501,501,501,501,509,509,509,5],[308,501,509,509,509,3,4,509,509,509,509],[307,501,501,2,501,501,501,501,509,509,509],[312,650,501,2,501,509,509,509,7,14,7],[501,501,501,3,501,304,501,305,501,304,501],[509,509,501,509,501,3,501,308,304,509,501],[508,509,3,509,509,509,501,301,501,507,501]],new Location(0,9),new Location(9,9),p_goods_array);p_map_array[6]=new Map(6,[[317,11,501,307,501,301,29,316,501,309,309],[11,312,501,308,501,509,301,29,501,13,309],[301,10,305,509,305,10,509,301,501,312,13],[509,509,501,14,501,509,509,509,501,20,509],[501,501,501,306,501,501,501,501,501,304,501],[509,509,17,509,301,301,301,509,17,509,509],[509,501,501,501,501,501,501,501,501,501,501],[509,501,9,304,9,509,509,509,509,509,501],[509,501,304,501,304,501,501,501,501,305,501],[509,501,9,501,509,509,501,501,509,509,501],[509,509,509,501,507,509,304,304,509,508,501]],new Location(8,10),new Location(4,9),p_goods_array);p_map_array[7]=new Map(7,[[507,509,509,509,509,509,509,509,501,501,501],[501,501,509,10,501,305,501,11,312,501,501],[501,509,10,307,501,18,501,308,11,11,501],[509,509,501,501,501,510,501,501,501,11,509],[509,509,305,18,510,318,510,18,305,11,509],[509,501,501,501,501,510,501,501,501,501,509],[509,501,307,307,501,18,501,308,308,501,509],[509,501,310,310,307,312,308,309,309,501,509],[509,501,501,301,301,303,302,302,501,501,509],[509,509,501,501,501,306,501,501,501,509,509],[501,509,509,304,508,509,509,304,509,509,501]],new Location(5,10),new Location(1,0),p_goods_array);p_map_array[8]=new Map(8,[[508,501,11,509,509,509,501,11,301,11,11],[509,501,11,501,501,304,501,304,501,501,509],[509,501,509,501,29,29,305,509,29,501,308],[11,501,509,501,8,501,501,501,9,501,2],[9,501,11,501,310,501,507,509,509,501,2],[10,501,307,501,310,501,501,501,501,501,509],[9,501,2,501,509,509,509,501,509,10,509],[509,501,2,501,501,501,14,501,304,501,501],[509,501,312,11,509,501,11,501,509,509,509],[509,501,501,501,304,501,509,501,501,501,509],[509,509,8,509,509,501,509,29,18,29,312]],new Location(0,1),new Location(7,4),p_goods_array);p_map_array[9]=new Map(9,[[319,22,301,501,501,501,509,509,509,501,312],[22,301,20,304,509,11,11,501,509,304,11],[501,304,501,501,11,501,501,501,509,501,301],[509,509,509,501,11,501,509,509,14,501,301],[509,509,509,306,29,501,508,501,509,501,310],[501,305,501,501,29,501,501,501,14,501,501],[307,12,308,501,8,501,507,501,509,501,310],[501,304,501,501,509,509,509,304,29,501,301],[11,310,11,501,501,305,501,501,509,501,301],[302,11,310,501,13,8,13,501,509,304,11],[320,302,11,304,309,13,309,501,509,501,312]],new Location(6,3),new Location(6,7),p_goods_array);p_map_array[10]=new Map(10,[[509,501,501,307,20,501,20,308,501,501,312],[509,509,501,501,304,501,304,501,501,509,13],[509,509,509,509,509,501,509,509,509,13,309],[14,501,509,501,501,501,501,501,509,501,501],[14,501,509,509,301,301,29,29,509,501,301],[10,501,509,501,501,501,501,304,501,501,301],[9,501,509,509,509,508,501,509,304,10,509],[509,501,501,501,501,501,501,304,501,501,509],[509,501,310,307,308,501,312,10,312,501,301],[509,501,310,307,308,306,8,501,8,501,301],[507,501,310,307,308,501,302,501,302,501,310]],new Location(4,6),new Location(0,9),p_goods_array);p_map_array[11]=new Map(11,[[310,501,301,501,302,501,303,501,309,321,309],[310,501,301,501,302,501,303,501,14,14,14],[310,501,301,501,302,501,303,501,312,14,312],[304,501,304,501,304,501,304,501,501,305,501],[21,312,21,312,21,501,21,509,509,21,509],[304,501,501,305,501,501,501,305,501,501,304],[307,501,312,21,309,16,309,21,509,501,308],[307,501,20,501,501,501,501,501,20,501,308],[307,501,20,501,502,652,503,501,20,501,308],[501,501,306,501,310,29,310,501,306,501,501],[508,509,509,509,509,509,509,509,509,509,507]],new Location(1,10),new Location(9,10),p_goods_array);p_map_array[12]=new Map(12,[[653,307,501,509,15,19,15,509,501,309,322],[308,312,501,509,501,304,501,509,501,312,309],[509,509,501,509,501,19,501,509,501,509,509],[509,16,501,509,501,301,501,509,501,25,509],[16,24,501,509,501,301,501,509,501,27,25],[501,305,501,509,501,310,501,509,501,305,501],[509,509,509,509,501,312,501,509,509,509,509],[501,501,501,509,501,501,501,509,501,501,501],[307,16,304,21,21,22,21,21,304,16,308],[501,501,501,501,501,305,501,501,501,501,501],[507,509,509,509,509,509,509,509,509,509,508]],new Location(9,10),new Location(1,10),p_goods_array);p_map_array[13]=new Map(13,[[509,16,509,509,509,509,509,501,509,24,509],[509,501,501,501,501,501,304,501,509,501,509],[509,501,509,509,21,509,509,501,509,501,509],[309,501,306,501,501,501,509,501,509,501,509],[15,501,509,509,24,501,21,501,308,501,509],[19,501,509,23,510,501,22,501,308,501,509],[15,501,24,510,654,501,21,501,308,501,307],[509,501,501,501,501,501,509,501,509,501,307],[509,15,509,501,509,509,509,24,509,501,307],[501,501,509,501,309,501,501,501,501,501,312],[508,509,509,305,509,507,501,323,23,304,312]],new Location(1,10),new Location(4,10),p_goods_array);p_map_array[14]=new Map(14,[[501,509,25,314,507,312,509,509,509,509,501],[501,509,309,501,501,501,501,501,309,509,501],[501,509,501,501,501,501,501,501,501,509,501],[501,509,501,501,501,324,501,501,501,509,501],[501,509,501,501,501,510,501,501,501,509,501],[501,509,310,501,501,24,501,501,310,509,501],[501,509,506,506,501,23,501,506,506,509,501],[501,509,506,506,501,24,501,506,506,509,501],[501,509,506,506,501,305,501,506,506,509,501],[501,21,22,21,305,509,305,21,22,21,501],[501,501,501,501,501,508,501,501,501,501,501]],new Location(5,9),new Location(5,0),p_goods_array);p_map_array[15]=new Map(15,[[509,509,509,509,508,506,507,509,509,509,509],[509,506,506,506,506,506,506,506,506,506,509],[509,506,506,501,501,501,501,501,506,506,509],[509,506,501,501,656,501,655,501,501,506,509],[509,506,501,501,307,501,307,501,501,506,509],[509,506,501,501,308,501,308,501,501,506,509],[509,506,506,501,312,501,312,501,506,506,509],[509,506,506,501,304,501,304,501,506,506,509],[509,506,506,506,509,509,509,506,506,506,509],[509,506,506,506,506,306,506,506,506,506,509],[509,509,509,509,509,509,509,509,509,509,509]],new Location(3,0),new Location(7,0),p_goods_array);p_map_array[16]=new Map(16,[[506,506,506,506,506,509,508,506,506,506,506],[506,506,506,506,506,509,506,506,506,506,506],[506,506,506,506,506,509,506,506,506,506,506],[506,506,506,506,501,306,501,506,506,506,506],[506,506,506,501,501,28,501,501,506,506,506],[506,506,506,501,501,312,501,501,506,506,506],[506,506,506,501,501,312,501,501,506,506,506],[506,506,506,501,501,507,501,501,506,506,506],[506,506,506,506,501,501,501,506,506,506,506],[506,506,506,506,506,506,506,506,506,506,506],[506,506,506,506,506,506,506,506,506,506,506]],new Location(5,0),new Location(5,6),p_goods_array);p_map_array[17]=new Map(17,[[506,25,23,509,509,509,509,312,509,509,25],[506,23,506,506,506,506,506,506,506,506,509],[506,509,506,25,509,509,312,509,509,509,25],[506,509,506,509,506,506,506,506,506,506,506],[506,312,506,509,506,25,509,509,509,25,506],[506,509,506,25,509,509,506,506,506,509,506],[506,509,506,506,506,506,506,25,509,25,506],[506,23,506,506,506,508,506,509,506,506,506],[506,25,23,509,26,509,506,25,509,509,25],[506,506,506,506,506,506,506,506,506,506,509],[507,312,26,509,509,509,509,509,509,509,25]],new Location(5,8),new Location(1,10),p_goods_array);p_map_array[18]=new Map(18,[[506,506,506,506,506,506,506,506,506,506,506],[506,506,506,506,506,506,506,506,506,506,506],[506,506,506,506,506,506,506,506,506,506,506],[506,506,506,506,501,501,501,506,506,506,506],[506,506,506,501,501,606,501,501,506,506,506],[506,506,506,501,501,510,501,501,506,506,506],[506,506,506,501,501,306,501,501,506,506,506],[506,506,506,506,501,501,501,506,506,506,506],[506,506,506,506,506,509,506,506,506,506,506],[506,506,506,506,506,509,506,506,506,506,506],[508,509,509,509,509,509,509,509,509,509,509]],new Location(1,10),new Location(9,10),p_goods_array);p_map_array[19]=new Map(19,[[509,509,509,509,509,509,509,509,509,509,509],[509,506,509,506,506,506,506,506,509,506,509],[509,506,509,506,506,506,506,506,509,506,509],[509,506,509,506,506,507,506,506,509,506,509],[509,506,30,506,506,312,506,506,30,506,509],[509,506,510,506,506,31,506,506,510,506,509],[509,506,312,506,506,509,506,506,312,506,509],[509,506,325,506,506,509,506,506,326,506,509],[509,506,506,506,506,509,506,506,506,506,509],[509,506,506,506,506,509,506,506,506,506,509],[509,509,509,509,509,509,509,509,509,509,508]],new Location(9,10),new Location(5,4),p_goods_array);p_map_array[20]=new Map(20,[[26,308,18,310,23,303,23,310,18,308,26],[309,506,301,506,302,506,302,506,301,506,309],[506,307,18,509,25,509,25,509,18,307,506],[310,506,301,506,509,508,509,506,301,506,310],[23,302,25,509,509,509,509,509,25,302,23],[303,506,509,506,509,506,509,506,509,506,303],[23,302,25,509,509,509,509,509,25,302,23],[310,506,301,506,509,507,509,506,301,506,310],[506,307,18,509,25,509,25,509,18,307,506],[309,506,301,506,302,506,302,506,301,506,309],[26,308,18,310,23,303,23,310,18,308,26]],new Location(5,4),new Location(5,6),p_goods_array);p_map_array[21]=new Map(21,[[506,506,506,506,506,506,506,506,506,506,506],[506,506,509,509,506,32,506,509,509,506,506],[506,509,509,506,506,27,506,506,509,509,506],[506,509,509,509,506,27,506,509,509,509,506],[506,506,509,509,509,324,509,509,509,506,506],[506,506,509,509,509,509,509,509,509,506,506],[506,506,506,509,509,506,509,509,506,506,506],[506,506,506,506,509,508,509,506,506,506,506],[506,506,506,506,506,506,506,506,506,506,506],[506,506,506,506,506,506,506,506,506,506,506],[506,506,506,506,506,506,506,506,506,506,506]],new Location(5,5),new Location(4,7),p_goods_array);p_map_array[22]=new Map(22,[[509,509,0,1,2,3,4,5,6,7,509],[509,509,509,509,509,509,509,509,509,509,509],[509,509,8,9,10,11,12,13,14,15,509],[509,509,509,509,509,509,509,509,509,509,509],[509,509,16,17,18,19,20,21,22,23,509],[509,509,509,509,509,509,509,509,509,509,509],[509,509,24,25,26,27,28,29,30,31,509],[509,509,509,509,509,509,509,509,509,509,509],[509,509,32,509,509,509,509,509,509,509,509],[509,509,509,509,509,509,509,509,509,509,509],[509,509,509,509,509,509,509,509,509,509,509]],new Location(0,0),new Location(10,10),p_goods_array);}
function DaMen(p_id,p_name,p_image_id,p_condition_property_name,p_success_des,p_failed_des){this.id=p_id;this.name=p_name;this.imageId=p_image_id;this.conditionPropertyName=p_condition_property_name;this.successDes=p_success_des;this.failedDes=p_failed_des;this.image=IMAGE_PATH+p_image_id+".jpg";}
DaMen.prototype.clone=function(){return new DaMen(this.id,this.name,this.imageId,this.conditionPropertyName,this.successDes,this.failedDes);};function FightDialogWin(p_player){this.player=p_player;this.pageContainer=$('<div/>');var fightLeftDiv=$('<div class="duizhanInfoWin"></div>');fightLeftDiv.append($('<img id="fightImage" src="'+IMAGE_PATH+'player_2.jpg" style="margin-top:10px;"/>')).append('<div id="fightTimer" class="fightTimer"/>');$('<ul style="list-style:none;margin-left:4px;text-align:left;"/>').append($('<li>生命：<span id="fightShengming"></span></li>')).append($('<li>攻击：<span id="fightGongji"></span></li>')).append($('<li>防御：<span id="fightFangyu"></span></li>')).append($('<li>速度：<span id="fightSudu"></span></li>')).appendTo(fightLeftDiv);var fightMiddleDiv=$('<div id="fightingWindow" class="duizhanContentWin" ></div>');var fightRightDiv=$('<div class="duizhanInfoWin"></div>');fightRightDiv.append($('<img id="fightGImage" style="margin-top:10px;"/>')).append('<div class="closeFightInfo" id="fightOK">【按空格继续】</div>');$('<ul style="list-style:none;margin-left:4px;text-align:left;"/>').append($('<li>生命：<span id="fightGShengming"></span></li>')).append($('<li>攻击：<span id="fightGGongji"></span></li>')).append($('<li>防御：<span id="fightGFangyu"></span></li>')).append($('<li>速度：<span id="fightGSudu"></span></li>')).appendTo(fightRightDiv);this.pageContainer.append(fightLeftDiv).append(fightMiddleDiv).append(fightRightDiv).addClass('fightWinCss').css('display','none');}
FightDialogWin.prototype.show=function(p_guaiwu){this.player.isFighting=true;this.player.isMoveing=false;$("#fightOK").css("display","none");$('#fightShengming',this.pageContainer).text(this.player.property['shengming']);$('#fightGongji',this.pageContainer).text(this.player.property['gongjiMin']+" - "+this.player.property['gongjiMax']);$('#fightFangyu',this.pageContainer).text(this.player.property['fangyu']);$('#fightSudu',this.pageContainer).text(this.player.property['sudu']);$('#fightGImage',this.pageContainer).attr('src',p_guaiwu.image);$('#fightGShengming',this.pageContainer).text(p_guaiwu.property['shengming']);$('#fightGGongji',this.pageContainer).text(p_guaiwu.property['gongjiMin']+" - "+p_guaiwu.property['gongjiMax']);$('#fightGFangyu',this.pageContainer).text(p_guaiwu.property['fangyu']);$('#fightGSudu',this.pageContainer).text(p_guaiwu.property['sudu']);var pSM=this.player.property['shengming'],gSM=p_guaiwu.property['shengming'];var shijianmiao=1;var gongjizhi,tmpSuiji,dspFlag,str=new StringBuffer();str.append("<br><div class='fightLineStyle' id='fightBeginDiv' miaotype='0'>你对着<span class='fightGuaiDsp'>"+p_guaiwu.name+"</span>说去死吧！</div><br><br>");var huiheshuNum=0;while(true){if(shijianmiao%this.player.property['sudu']==0){tmpSuiji=getRandomInt(0,150);if(tmpSuiji<=10+this.player.property['shiqi']){dspFlag=true;gongjizhi=this.player.property['gongjiMax']-p_guaiwu.property['fangyu'];}else{dspFlag=false;gongjizhi=getRandomInt(this.player.property['gongjiMin'],this.player.property['gongjiMax'])-p_guaiwu.property['fangyu'];}
if(gongjizhi<=1)gongjizhi=1;str.append("<div class='fightLineStyle' id='playPKguai"+shijianmiao+"' miaotype='"+shijianmiao+"'>第"+shijianmiao+"秒&nbsp;你打了<span class='fightGuaiDsp'>"+p_guaiwu.name+"</span>一下，");if(dspFlag){str.append("<span class='fightShiQiDsp'>你的士气高涨，</span>")}
tmpSuiji=getRandomInt(0,150);if(tmpSuiji<=10+this.player.property['fuyuan']&&tmpSuiji>5+this.player.property['fuyuan']){str.append("<span class='fightFenNuDsp'>你突然愤怒了</span>，");gongjizhi*=2;}else if(tmpSuiji<=5+this.player.property['fuyuan']&&tmpSuiji>1+this.player.property['fuyuan']){str.append("<span class='fightFenNuJiDianDsp'>你非常愤怒</span>，");gongjizhi*=3;}else if(tmpSuiji<=1+this.player.property['fuyuan']){str.append("<span class='fightRanShaoDsp'>你愤怒之极了</span>，");gongjizhi*=5;}
gSM-=gongjizhi;str.append("打了它<span class='fightTiXingDsp'>"+gongjizhi+"</span>血<br><br></div>");huiheshuNum++;if(gSM<=0)break;}
if(shijianmiao%p_guaiwu.property['sudu']==0){gongjizhi=getRandomInt(p_guaiwu.property['gongjiMin'],p_guaiwu.property['gongjiMax'])-this.player.property['fangyu'];if(gongjizhi<=1)gongjizhi=1;str.append("<div  class='fightLineStyle' id='guaiPKplayer"+shijianmiao+"' miaotype='"+shijianmiao+"'>第"+shijianmiao+"秒&nbsp;<span class='fightGuaiDsp'>"+p_guaiwu.name+"</span>打了你一下，");tmpSuiji=getRandomInt(0,100);if(tmpSuiji<=10&&tmpSuiji>5){str.append("<span class='fightFenNuDsp'>它突然愤怒了</span>，");gongjizhi*=2;}else if(tmpSuiji<=5&&tmpSuiji>1){str.append("<span class='fightFenNuJiDianDsp'>它非常愤怒</span>，");gongjizhi*=3;}else if(tmpSuiji<=1){str.append("<span class='fightRanShaoDsp'>它愤怒之极了</span>，");gongjizhi*=5;}
pSM-=gongjizhi;str.append("打了你<span class='fightTiXingDsp'>"+gongjizhi+"</span>血<br><br></div>");if(pSM<=0)break;}
shijianmiao++;}
if(pSM<=0){this.close(finishDongHua(p_guaiwu));}else{var jingyan,jinbi;tmpSuiji=getRandomInt(0,150);if(tmpSuiji<=10+this.player.property['xingyun']){dspFlag=true;jingyan=p_guaiwu.property['jingyanMax'];jinbi=p_guaiwu.property['jinbiMax'];}else{dspFlag=false;jingyan=getRandomInt(p_guaiwu.property['jingyanMin'],p_guaiwu.property['jingyanMax']);jinbi=getRandomInt(p_guaiwu.property['jinbiMin'],p_guaiwu.property['jinbiMax']);}
str.append("<div class='fightLineStyle' id='fightFinishDiv' miaotype='").append(shijianmiao).append("'>战斗胜利！你损失了<span class='fightTiXingDsp'>").append(this.player.property['shengming']-pSM).append("</span>血，共经历了<span class='fightTiXingDsp'>").append(huiheshuNum).append("</span>回合，");if(dspFlag){str.append("<span class='fightTiXingDsp'>你的运气不错，</span>，");}
str.append("增加了<span class='fightTiXingDsp'>"+jingyan+"</span>经验和<span class='fightTiXingDsp'>"+jinbi+"</span>金币。</div>");$("#fightingWindow",this.pageContainer).attr('innerHTML',str);this.pageContainer.css('display','block');$("#fightingWindow",this.pageContainer).attr("scrollTop",0);this.player.property['shengming']=pSM;this.player.property['jingyan']+=jingyan;this.player.property['jinbi']+=jinbi;__fightGuaiDongHua();}};var __fight_timer_timer=0;function __fightGuaiDongHua(){if($("#fightFinishDiv","#fightingWindow").css("display")=="block"){$("#fightOK").css("display","block");__fight_timer_timer=0;}else{$(".fightLineStyle","#fightingWindow").each(function(){if(parseInt($(this).attr("miaotype"))<=__fight_timer_timer){$(this).show().removeClass("fightLineStyle").css("display","block");if(parseInt($("#fightingWindow",this.pageContainer).attr("scrollHeight"))>=parseInt($("#fightingWindow",this.pageContainer).css("height"))){$("#fightingWindow",this.pageContainer).attr("scrollTop",parseInt($("#fightingWindow",this.pageContainer).attr("scrollHeight")));}}});__fight_timer_timer=__fight_timer_timer+10;window.setTimeout("__fightGuaiDongHua()",YOUXI_SHIJIAN_10_MIAO_ZHENSHI_SHIJIAN);}}
FightDialogWin.prototype.close=function(p_action){this.player.isFighting=false;this.player.isMoveing=true;this.pageContainer.css('display','none');if(p_action){p_action();}};var JINBI_CHUJI_JINBI=50,JINBI_CHUJI_SHENGMING_MIN=800,JINBI_CHUJI_SHENGMING_MAX=1200,JINBI_CHUJI_GONGJI_MIN_MIN=4,JINBI_CHUJI_GONGJI_MIN_MAX=6,JINBI_CHUJI_GONGJI_MAX_MIN=6,JINBI_CHUJI_GONGJI_MAX_MAX=9,JINBI_CHUJI_FANGYU_MIN=4,JINBI_CHUJI_FANGYU_MAX=6;var JINBI_GAOJI_JINBI=225,JINBI_GAOJI_SHENGMING_MIN=4000,JINBI_GAOJI_SHENGMING_MAX=6000,JINBI_GAOJI_GONGJI_MIN_MIN=20,JINBI_GAOJI_GONGJI_MIN_MAX=30,JINBI_GAOJI_GONGJI_MAX_MIN=30,JINBI_GAOJI_GONGJI_MAX_MAX=45,JINBI_GAOJI_FANGYU_MIN=20,JINBI_GAOJI_FANGYU_MAX=30;var JINGYAN_CHUJI_JINGYAN=50,JINGYAN_CHUJI_SHENGJI_SHENGMING_MIN=300,JINGYAN_CHUJI_SHENGJI_SHENGMING_MAX=450,JINGYAN_CHUJI_SHENGJI_GONGJI_MIN_MIN=2,JINGYAN_CHUJI_SHENGJI_GONGJI_MIN_MAX=3,JINGYAN_CHUJI_SHENGJI_GONGJI_MAX_MIN=3,JINGYAN_CHUJI_SHENGJI_GONGJI_MAX_MAX=5,JINGYAN_CHUJI_SHENGJI_FANGYU_MIN=2,JINGYAN_CHUJI_SHENGJI_FANGYU_MAX=3,JINGYAN_CHUJI_GONGJI_MIN_MIN=5,JINGYAN_CHUJI_GONGJI_MIN_MAX=8,JINGYAN_CHUJI_GONGJI_MAX_MIN=8,JINGYAN_CHUJI_GONGJI_MAX_MAX=12,JINGYAN_CHUJI_FANGYU_MIN=5,JINGYAN_CHUJI_FANGYU_MAX=8;var JINGYAN_GAOJI_JINGYAN=225,JINGYAN_GAOJI_SHENGJI_SHENGMING_MIN=1500,JINGYAN_GAOJI_SHENGJI_SHENGMING_MAX=2250,JINGYAN_GAOJI_SHENGJI_GONGJI_MIN_MIN=20,JINGYAN_GAOJI_SHENGJI_GONGJI_MIN_MAX=15,JINGYAN_GAOJI_SHENGJI_GONGJI_MAX_MIN=15,JINGYAN_GAOJI_SHENGJI_GONGJI_MAX_MAX=23,JINGYAN_GAOJI_SHENGJI_FANGYU_MIN=10,JINGYAN_GAOJI_SHENGJI_FANGYU_MAX=15,JINGYAN_GAOJI_GONGJI_MIN_MIN=25,JINGYAN_GAOJI_GONGJI_MIN_MAX=38,JINGYAN_GAOJI_GONGJI_MAX_MIN=38,JINGYAN_GAOJI_GONGJI_MAX_MAX=55,JINGYAN_GAOJI_FANGYU_MIN=25,JINGYAN_GAOJI_FANGYU_MAX=38;var GOUMAI_HUANG_YAOSHI=30,GOUMAI_LAN_YAOSHI=50,GOUMAI_HONG_YAOSHI=100;var SHOUCHU_HUANG_YAOSHI=15,SHOUCHU_LAN_YAOSHI=25,SHOUCHU_HONG_YAOSHI=50;function GouMaiWin(p_player){this.player=p_player;this.pageContainer=$('<div id="goumaiWinDivContainer"/>').addClass('goumaiDialogCss').css('display','none');}
GouMaiWin.prototype.show=function(p_shop_id,p_action){this.player.isMoveing=false;this.player.isGouMai=true;this.pageContainer.attr("innerHTML","");var innerHtml=new StringBuffer();if(p_shop_id==605){innerHtml.append("<div class='goumaishangdianDSP'>欢迎来到初级商店！</div>");innerHtml.append("<div class='goumaishangdianDSP'>您只需消费"+JINBI_CHUJI_JINBI+"个金币就可以选择以下内容：</div>");innerHtml.append("<div class='goumaishangdianDSP'>增加"+JINBI_CHUJI_SHENGMING_MIN+"-"+
JINBI_CHUJI_SHENGMING_MAX+"点生命<br>【按数字键1】</div>");innerHtml.append("<div class='goumaishangdianDSP'>增加最小"+JINBI_CHUJI_GONGJI_MIN_MIN+"-"+JINBI_CHUJI_GONGJI_MIN_MAX+" 最大"+JINBI_CHUJI_GONGJI_MAX_MIN+"-"+JINBI_CHUJI_GONGJI_MAX_MAX+"点攻击<br>【按数字键2】</div>");innerHtml.append("<div class='goumaishangdianDSP'>增加"+JINBI_CHUJI_FANGYU_MIN+"-"+JINBI_CHUJI_FANGYU_MAX+"点防御<br>【按数字键3】</div>");}else if(p_shop_id==652){innerHtml.append("<div class='goumaishangdianDSP'>欢迎来到高级商店！</div>");innerHtml.append("<div class='goumaishangdianDSP'>您只需消费"+JINBI_GAOJI_JINBI+"个金币就可以选择以下内容：</div>");innerHtml.append("<div class='goumaishangdianDSP'>增加"+JINBI_GAOJI_SHENGMING_MIN+"-"+
JINBI_GAOJI_SHENGMING_MAX+"点生命<br>【按数字键1】</div>");innerHtml.append("<div class='goumaishangdianDSP'>增加最小"+JINBI_GAOJI_GONGJI_MIN_MIN+"-"+JINBI_GAOJI_GONGJI_MIN_MAX+" 最大"+JINBI_GAOJI_GONGJI_MAX_MIN+"-"+JINBI_GAOJI_GONGJI_MAX_MAX+"点攻击<br>【按数字键2】</div>");innerHtml.append("<div class='goumaishangdianDSP'>增加"+JINBI_GAOJI_FANGYU_MIN+"-"+JINBI_GAOJI_FANGYU_MAX+"点防御<br>【按数字键3】</div>");}else if(p_shop_id==650){innerHtml.append("<div class='goumaishangdianDSP'>欢迎来到初级经验商店！</div>");innerHtml.append("<div class='goumaishangdianDSP'>您只需消费"+JINGYAN_CHUJI_JINGYAN+"点经验就可以选择以下内容：</div>");innerHtml.append("<div class='goumaishangdianDSP'>提升一级<br>【按数字键1】</div>");innerHtml.append("<div class='goumaishangdianDSP'>增加最小"+JINGYAN_CHUJI_GONGJI_MIN_MIN+"-"+JINGYAN_CHUJI_GONGJI_MIN_MAX+" 最大"+JINGYAN_CHUJI_GONGJI_MAX_MIN+"-"+JINGYAN_CHUJI_GONGJI_MAX_MAX+"点攻击<br>【按数字键2】</div>");innerHtml.append("<div class='goumaishangdianDSP'>增加"+JINGYAN_CHUJI_FANGYU_MIN+"-"+JINGYAN_CHUJI_FANGYU_MAX+"点防御<br>【按数字键3】</div>");}else if(p_shop_id==654){innerHtml.append("<div class='goumaishangdianDSP'>欢迎来到高级经验商店！</div>");innerHtml.append("<div class='goumaishangdianDSP'>您只需消费"+JINGYAN_GAOJI_JINGYAN+"点经验就可以选择以下内容：</div>");innerHtml.append("<div class='goumaishangdianDSP'>提升五级<br>【按数字键1】</div>");innerHtml.append("<div class='goumaishangdianDSP'>增加最小"+JINGYAN_GAOJI_GONGJI_MIN_MIN+"-"+JINGYAN_GAOJI_GONGJI_MIN_MAX+" 最大"+JINGYAN_GAOJI_GONGJI_MAX_MIN+"-"+JINGYAN_GAOJI_GONGJI_MAX_MAX+"点攻击<br>【按数字键2】</div>");innerHtml.append("<div class='goumaishangdianDSP'>增加"+JINGYAN_GAOJI_FANGYU_MIN+"-"+JINGYAN_GAOJI_FANGYU_MAX+"点防御<br>【按数字键3】</div>");}else if(p_shop_id==651){innerHtml.append("<div class='goumaishangdianDSP'>欢迎来到钥匙商店！</div>");innerHtml.append("<div class='goumaishangdianDSP'>您只需有足够的金币就可以选择以下内容：</div>");innerHtml.append("<div class='goumaishangdianDSP'>购买一把黄钥匙"+GOUMAI_HUANG_YAOSHI+"元<br>【按数字键1】</div>");innerHtml.append("<div class='goumaishangdianDSP'>购买一把蓝钥匙"+GOUMAI_LAN_YAOSHI+"元<br>【按数字键2】</div>");innerHtml.append("<div class='goumaishangdianDSP'>购买一把红钥匙"+GOUMAI_HONG_YAOSHI+"元<br>【按数字键3】</div>");}else if(p_shop_id==653){innerHtml.append("<div class='goumaishangdianDSP'>欢迎来到钥匙收购商店！</div>");innerHtml.append("<div class='goumaishangdianDSP'>如你有多余的钥匙，就可以作如下选择：</div>");innerHtml.append("<div class='goumaishangdianDSP'>售出一把黄钥匙"+SHOUCHU_HUANG_YAOSHI+"元<br>【按数字键1】</div>");innerHtml.append("<div class='goumaishangdianDSP'>售出一把蓝钥匙"+SHOUCHU_LAN_YAOSHI+"元<br>【按数字键2】</div>");innerHtml.append("<div class='goumaishangdianDSP'>售出一把红钥匙"+SHOUCHU_HONG_YAOSHI+"元<br>【按数字键3】</div>");}
innerHtml.append("<div class='goumaishangdianDSP'>离开商店<br>【按空格键】</div>");this.pageContainer.attr("innerHTML",innerHtml.toString());this.pageContainer.css('display','block');if(p_action){p_action();}};GouMaiWin.prototype.click1=function(p_shop_id){var tmpAddSuccessDes,tmpAddPropertyArray=new Array();var tmpConditionPropertyName,tmpConditionValue,tmpConditionDes;if(p_shop_id==605){tmpAddSuccessDes="你增加{0}点生命！";tmpAddPropertyArray.push({property:"shengming",min:JINBI_CHUJI_SHENGMING_MIN,max:JINBI_CHUJI_SHENGMING_MAX,am:"add",mmin:0});tmpConditionPropertyName='jinbi',tmpConditionValue=JINBI_CHUJI_JINBI,tmpConditionDes='你金币不够了！';}else if(p_shop_id==652){tmpAddSuccessDes="你增加{0}点生命！";tmpAddPropertyArray.push({property:"shengming",min:JINBI_GAOJI_SHENGMING_MIN,max:JINBI_GAOJI_SHENGMING_MAX,am:"add",mmin:0});tmpConditionPropertyName='jinbi',tmpConditionValue=JINBI_GAOJI_JINBI,tmpConditionDes='你金币不够了！';}else if(p_shop_id==650){tmpAddSuccessDes="你提升了一级！等级增加{0}，生命增加{1}点，攻击增加{2}-{3}点，防御增加{4}点！";tmpAddPropertyArray.push({property:"dengji",min:1,max:1,am:"add",mmin:0});tmpAddPropertyArray.push({property:"shengming",min:JINGYAN_CHUJI_SHENGJI_SHENGMING_MIN,max:JINGYAN_CHUJI_SHENGJI_SHENGMING_MAX,am:"add",mmin:0});tmpAddPropertyArray.push({property:'gongjiMin',min:JINGYAN_CHUJI_SHENGJI_GONGJI_MIN_MIN,max:JINGYAN_CHUJI_SHENGJI_GONGJI_MIN_MAX,am:"add",mmin:0});tmpAddPropertyArray.push({property:'gongjiMax',min:JINGYAN_CHUJI_SHENGJI_GONGJI_MAX_MIN,max:JINGYAN_CHUJI_SHENGJI_GONGJI_MAX_MAX,am:"add",mmin:0});tmpAddPropertyArray.push({property:'fangyu',min:JINGYAN_CHUJI_SHENGJI_FANGYU_MIN,max:JINGYAN_CHUJI_SHENGJI_FANGYU_MAX,am:"add",mmin:0});tmpConditionPropertyName='jingyan',tmpConditionValue=JINGYAN_CHUJI_JINGYAN,tmpConditionDes='你经验不够了！';}else if(p_shop_id==654){tmpAddSuccessDes="你提升了五级！等级增加{0}，生命增加{1}点，攻击增加{2}-{3}点，防御增加{4}点！";tmpAddPropertyArray.push({property:"dengji",min:5,max:5,am:"add",mmin:0});tmpAddPropertyArray.push({property:"shengming",min:JINGYAN_GAOJI_SHENGJI_SHENGMING_MIN,max:JINGYAN_GAOJI_SHENGJI_SHENGMING_MAX,am:"add",mmin:0});tmpAddPropertyArray.push({property:'gongjiMin',min:JINGYAN_GAOJI_SHENGJI_GONGJI_MIN_MIN,max:JINGYAN_GAOJI_SHENGJI_GONGJI_MIN_MAX,am:"add",mmin:0});tmpAddPropertyArray.push({property:'gongjiMax',min:JINGYAN_GAOJI_SHENGJI_GONGJI_MAX_MIN,max:JINGYAN_GAOJI_SHENGJI_GONGJI_MAX_MAX,am:"add",mmin:0});tmpAddPropertyArray.push({property:'fangyu',min:JINGYAN_GAOJI_SHENGJI_FANGYU_MIN,max:JINGYAN_GAOJI_SHENGJI_FANGYU_MAX,am:"add",mmin:0});tmpConditionPropertyName='jingyan',tmpConditionValue=JINGYAN_GAOJI_JINGYAN,tmpConditionDes='你经验不够了！';}else if(p_shop_id==651){tmpAddSuccessDes="你购买了一把黄钥匙！";tmpAddPropertyArray.push({property:"huangyaoshi",min:1,max:1,am:"add",mmin:0});tmpConditionPropertyName='jinbi',tmpConditionValue=GOUMAI_HUANG_YAOSHI,tmpConditionDes='你金币不够了！';}else if(p_shop_id==653){tmpAddSuccessDes="你售出了一把黄钥匙！";tmpAddPropertyArray.push({property:"jinbi",min:SHOUCHU_HUANG_YAOSHI,max:SHOUCHU_HUANG_YAOSHI,am:"add",mmin:0});tmpConditionPropertyName='huangyaoshi',tmpConditionValue=1,tmpConditionDes='你黄钥匙没有了！';}
return{addPropertyFlag:true,addPropertyObj:{des:tmpAddSuccessDes,property_array:tmpAddPropertyArray},conditionObj:{property:tmpConditionPropertyName,value:tmpConditionValue,des:tmpConditionDes}}};GouMaiWin.prototype.click2=function(p_shop_id){var tmpAddSuccessDes,tmpAddPropertyArray=new Array();var tmpConditionPropertyName,tmpConditionValue,tmpConditionDes;if(p_shop_id==605){tmpAddSuccessDes="你增加{0}-{1}点攻击！";tmpAddPropertyArray.push({property:'gongjiMin',min:JINBI_CHUJI_GONGJI_MIN_MIN,max:JINBI_CHUJI_GONGJI_MIN_MAX,am:"add",mmin:0});tmpAddPropertyArray.push({property:'gongjiMax',min:JINBI_CHUJI_GONGJI_MAX_MIN,max:JINBI_CHUJI_GONGJI_MAX_MAX,am:"add",mmin:0});tmpConditionPropertyName='jinbi',tmpConditionValue=JINBI_CHUJI_JINBI,tmpConditionDes='你金币不够了！';}else if(p_shop_id==652){tmpAddSuccessDes="你增加{0}-{1}点攻击！";tmpAddPropertyArray.push({property:'gongjiMin',min:JINBI_GAOJI_GONGJI_MIN_MIN,max:JINBI_GAOJI_GONGJI_MIN_MAX,am:"add",mmin:0});tmpAddPropertyArray.push({property:'gongjiMax',min:JINBI_GAOJI_GONGJI_MAX_MIN,max:JINBI_GAOJI_GONGJI_MAX_MAX,am:"add",mmin:0});tmpConditionPropertyName='jinbi',tmpConditionValue=JINBI_GAOJI_JINBI,tmpConditionDes='你金币不够了！';}else if(p_shop_id==650){tmpAddSuccessDes="你增加{0}-{1}点攻击！";tmpAddPropertyArray.push({property:'gongjiMin',min:JINGYAN_CHUJI_GONGJI_MIN_MIN,max:JINGYAN_CHUJI_GONGJI_MIN_MAX,am:"add",mmin:0});tmpAddPropertyArray.push({property:'gongjiMax',min:JINGYAN_CHUJI_GONGJI_MAX_MIN,max:JINGYAN_CHUJI_GONGJI_MAX_MAX,am:"add",mmin:0});tmpConditionPropertyName='jingyan',tmpConditionValue=JINGYAN_CHUJI_JINGYAN,tmpConditionDes='你经验不够了！';}else if(p_shop_id==654){tmpAddSuccessDes="你增加{0}-{1}点攻击！";tmpAddPropertyArray.push({property:'gongjiMin',min:JINGYAN_GAOJI_GONGJI_MIN_MIN,max:JINGYAN_GAOJI_GONGJI_MIN_MAX,am:"add",mmin:0});tmpAddPropertyArray.push({property:'gongjiMax',min:JINGYAN_GAOJI_GONGJI_MAX_MIN,max:JINGYAN_GAOJI_GONGJI_MAX_MAX,am:"add",mmin:0});tmpConditionPropertyName='jingyan',tmpConditionValue=JINGYAN_GAOJI_JINGYAN,tmpConditionDes='你经验不够了！';}else if(p_shop_id==651){tmpAddSuccessDes="你购买了一把蓝钥匙！";tmpAddPropertyArray.push({property:"lanyaoshi",min:1,max:1,am:"add",mmin:0});tmpConditionPropertyName='jinbi',tmpConditionValue=GOUMAI_LAN_YAOSHI,tmpConditionDes='你金币不够了！';}else if(p_shop_id==653){tmpAddSuccessDes="你售出了一把蓝钥匙！";tmpAddPropertyArray.push({property:"jinbi",min:SHOUCHU_LAN_YAOSHI,max:SHOUCHU_LAN_YAOSHI,am:"add",mmin:0});tmpConditionPropertyName='lanyaoshi',tmpConditionValue=1,tmpConditionDes='你蓝钥匙没有了！';}
return{addPropertyFlag:true,addPropertyObj:{des:tmpAddSuccessDes,property_array:tmpAddPropertyArray},conditionObj:{property:tmpConditionPropertyName,value:tmpConditionValue,des:tmpConditionDes}}};GouMaiWin.prototype.click3=function(p_shop_id){var tmpAddSuccessDes,tmpAddPropertyArray=new Array();var tmpConditionPropertyName,tmpConditionValue,tmpConditionDes;if(p_shop_id==605){tmpAddSuccessDes="你增加{0}点防御！";tmpAddPropertyArray.push({property:'fangyu',min:JINBI_CHUJI_FANGYU_MIN,max:JINBI_CHUJI_FANGYU_MAX,am:"add",mmin:0});tmpConditionPropertyName='jinbi',tmpConditionValue=JINBI_CHUJI_JINBI,tmpConditionDes='你金币不够了！';}else if(p_shop_id==652){tmpAddSuccessDes="你增加{0}点防御！";tmpAddPropertyArray.push({property:'fangyu',min:JINBI_GAOJI_FANGYU_MIN,max:JINBI_GAOJI_FANGYU_MAX,am:"add",mmin:0});tmpConditionPropertyName='jinbi',tmpConditionValue=JINBI_GAOJI_JINBI,tmpConditionDes='你金币不够了！';}else if(p_shop_id==650){tmpAddSuccessDes="你增加{0}点防御！";tmpAddPropertyArray.push({property:'fangyu',min:JINGYAN_CHUJI_FANGYU_MIN,max:JINGYAN_CHUJI_FANGYU_MAX,am:"add",mmin:0});tmpConditionPropertyName='jingyan',tmpConditionValue=JINGYAN_CHUJI_JINGYAN,tmpConditionDes='你经验不够了！';}else if(p_shop_id==654){tmpAddSuccessDes="你增加{0}点防御！";tmpAddPropertyArray.push({property:'fangyu',min:JINGYAN_GAOJI_FANGYU_MIN,max:JINGYAN_GAOJI_FANGYU_MAX,am:"add",mmin:0});tmpConditionPropertyName='jingyan',tmpConditionValue=JINGYAN_GAOJI_JINGYAN,tmpConditionDes='你经验不够了！';}else if(p_shop_id==651){tmpAddSuccessDes="你购买了一把红钥匙！";tmpAddPropertyArray.push({property:"hongyaoshi",min:1,max:1,am:"add",mmin:0});tmpConditionPropertyName='jinbi',tmpConditionValue=GOUMAI_HONG_YAOSHI,tmpConditionDes='你金币不够了！';}else if(p_shop_id==653){tmpAddSuccessDes="你售出了一把红钥匙！";tmpAddPropertyArray.push({property:"jinbi",min:SHOUCHU_HONG_YAOSHI,max:SHOUCHU_HONG_YAOSHI,am:"add",mmin:0});tmpConditionPropertyName='hongyaoshi',tmpConditionValue=1,tmpConditionDes='你红钥匙没有了！';}
return{addPropertyFlag:true,addPropertyObj:{des:tmpAddSuccessDes,property_array:tmpAddPropertyArray},conditionObj:{property:tmpConditionPropertyName,value:tmpConditionValue,des:tmpConditionDes}}};GouMaiWin.prototype.click4=function(p_shop_id){var tmpAddSuccessDes,tmpAddPropertyArray=new Array();var tmpConditionPropertyName,tmpConditionValue,tmpConditionDes;var tmpAddPropertyFlag=false;return{addPropertyFlag:tmpAddPropertyFlag,addPropertyObj:{des:tmpAddSuccessDes,property_array:tmpAddPropertyArray},conditionObj:{property:tmpConditionPropertyName,value:tmpConditionValue,des:tmpConditionDes}}};GouMaiWin.prototype.close=function(p_action){this.player.isMoveing=true;this.player.isGouMai=false;this.pageContainer.css('display','none');if(p_action){p_action();}};function GuaiWu(p_id,p_name,p_image_id,p_property_array){this.id=p_id;this.name=p_name;this.imageId=p_image_id;this.image=IMAGE_PATH+p_image_id+".jpg";this.paramPropertyArray=p_property_array;this.property=new Array();for(var i=0;i<p_property_array.length;i++){var tmpProperty=p_property_array[i];this.property[tmpProperty.name]=tmpProperty.value;}}
GuaiWu.prototype.clone=function(){return new GuaiWu(this.id,this.name,this.imageId,this.paramPropertyArray);};function Location(p_x,p_y){this.x=p_x;this.y=p_y;}
var __map_grid_images=new Array();function Map(p_floor,p_goods_id,p_location_up,p_location_down,p_all_goods_array){this.floor=p_floor;this.datas=p_goods_id;this.up=p_location_up;this.down=p_location_down;this.rows=p_goods_id.length-1;this.columns=p_goods_id[0].length-1;for(var i=0;i<this.datas.length;i++){for(var j=0;j<this.datas[i].length;j++){this.datas[i][j]=p_all_goods_array[this.datas[i][j]].clone();}}}
Map.prototype.getLocationObj=function(p_location){return this.datas[p_location.y][p_location.x];};Map.prototype.mapView=function(p_player,p_up_down){for(var i=0;i<this.datas.length;i++){if(!(__map_grid_images[i]instanceof Array)){__map_grid_images[i]=new Array();}
for(var j=0;j<this.datas[i].length;j++){var tmpImageObj=__map_grid_images[i][j];if(tmpImageObj==undefined){tmpImageObj=$('<img src="'+this.datas[i][j].image+'" class="gameGrid"/>');__map_grid_images[i][j]=tmpImageObj;$('#gameFrame').append(tmpImageObj);}else{tmpImageObj.attr('src',this.datas[i][j].image);}}}
var tmpLocation;if(p_up_down==0){tmpLocation=this.up;p_player.pagePlayer.css("background-image","url('"+p_player.imageDown+"')");}else{tmpLocation=this.down;p_player.pagePlayer.css("background-image","url('"+p_player.imageUp+"')");}
p_player.pagePlayer.css('left',tmpLocation.x*GRID_WIDTH).css('top',tmpLocation.y*GRID_HEIGHT);p_player.location=tmpLocation;p_player.property['floor']=this.floor;p_player.isMoveing=true;p_player.updatePageInfo();};Map.prototype.changeMapContent=function(p_location,p_wupin){this.datas[p_location.y][p_location.x]=p_wupin.clone();__map_grid_images[p_location.y][p_location.x].attr('src',p_wupin.image);};var GRID_WIDTH=32,GRID_HEIGHT=32;var LU_ID=509;var IMAGE_PATH="images/";var YOUXI_SHIJIAN_10_MIAO_ZHENSHI_SHIJIAN=200;var goodsArray=new Array();var maps=new Array();var player,currentMap;var speakWin,fightWin,viewGuaiWin,goumaiWin;var addPropertyWin=$('<div/>');function init(){initHtmlContent();player=new PlayerObj();initFillGoods(goodsArray);initMap(maps,goodsArray);speakWin=new SpeakDialogWin(player),fightWin=new FightDialogWin(player),viewGuaiWin=new ViewGuaiWin(player),goumaiWin=new GouMaiWin(player);currentMap=maps[0];currentMap.mapView(player,0);$("#gameFrame").append(player.pagePlayer).append(speakWin.pageContainer).append(fightWin.pageContainer).append(viewGuaiWin.pageContainer).append(goumaiWin.pageContainer).css('display','block');$(document).bind("keydown",keyDownInDocument);}
function keyDownInDocument(){var keyCode=event.keyCode;if(player.isMoveing){if(keyCode==37)player.moveLeftRight(0,playerCanMove);else if(keyCode==38)player.moveUpDown(0,playerCanMove);else if(keyCode==39)player.moveLeftRight(1,playerCanMove);else if(keyCode==40)player.moveUpDown(1,playerCanMove);}
if(player.isSpeaking){if(keyCode==32){if(player.dialogObject.id==601||player.dialogObject.id==602||player.dialogObject.id==606){if(player.dialogObject.isSpeakEnd()){if(player.dialogObject.action==0){player.dialogObject.geiyuJiangLi(player);if(player.dialogObject.id==601){}else if(player.dialogObject.id==602){maps[2].datas[6][1]=goodsArray[LU_ID].clone();}else if(player.dialogObject.id==606){maps[18].changeMapContent(new Location(10,10),goodsArray[507].clone());}
player.dialogObject.action=1;}else if(player.dialogObject.action==1){if(player.goods[player.dialogObject.speakArray[player.dialogObject.action].xuyaowupin]>0){player.dialogObject.geiyuJiangLi(player);player.goods[player.dialogObject.speakArray[player.dialogObject.action].xuyaowupin]--;if(player.dialogObject.id==601){}else if(player.dialogObject.id==602){maps[18].datas[7][5]=goodsArray[306].clone();}else if(player.dialogObject.id==606){finishDongHua(null);}}}
speakWin.close();}else{speakWin.show(player.dialogObject.getSpeakMsg());}}else if(player.dialogObject.id==301||player.dialogObject.id==302||player.dialogObject.id==303||player.dialogObject.id==304||player.dialogObject.id==305||player.dialogObject.id==306||player.dialogObject.id==307||player.dialogObject.id==308||player.dialogObject.id==312||player.dialogObject.id==309||player.dialogObject.id==310||player.dialogObject.id==323||player.dialogObject.id==324||player.dialogObject.id==313||player.dialogObject.id==315||player.dialogObject.id==320||player.dialogObject.id==321||player.dialogObject.id==325||player.dialogObject.id==326||player.dialogObject.id==314||player.dialogObject.id==316||player.dialogObject.id==318||player.dialogObject.id==319||player.dialogObject.id==322||player.dialogObject.id==311||player.dialogObject.id==317||player.dialogObject.id==603||player.dialogObject.id==604||player.dialogObject.id==655||player.dialogObject.id==656){player.updatePageInfo();speakWin.close();}else if(player.dialogObject.id<=300){speakWin.close();}else if(player.dialogObject.id==605||player.dialogObject.id==650||player.dialogObject.id==651||player.dialogObject.id==652||player.dialogObject.id==653||player.dialogObject.id==654){player.isGouMai=true;speakWin.close();player.isMoveing=false;return false;}}}
if(player.isFighting){if(keyCode==32&&$("#fightOK").css('display')=='block'){if(player.dialogObject.id==32){player.goods["damowang"]++;}
player.updatePageInfo();fightWin.close();}}
if(player.isGouMai){if(keyCode==49||keyCode==50||keyCode==51||keyCode==52){var ret;if(keyCode==49){ret=goumaiWin.click1(player.dialogObject.id);}else if(keyCode==50){ret=goumaiWin.click2(player.dialogObject.id);}else if(keyCode==51){ret=goumaiWin.click3(player.dialogObject.id);}else if(keyCode==52){ret=goumaiWin.click4(player.dialogObject.id);}
if(ret.addPropertyFlag){addPlayerProperty(player,speakWin,ret.addPropertyObj,ret.conditionObj);player.updatePageInfo();}else{return false;}}else if(keyCode==32){goumaiWin.close();}}
if(player.goods['viewGuaiBook']>0){if(!player.isSpeaking&&!player.isFighting&&!player.isGouMai){if(keyCode==76&&!player.isViewGuai){viewGuaiWin.show(currentMap);}else{if(player.isViewGuai&&(keyCode==76||keyCode==32)){viewGuaiWin.close();}}}}
if(!player.isSpeaking&&!player.isFighting&&!player.isGouMai&&!player.isViewGuai&&player.goods['feixingqi']>0){if(keyCode==87){if(player.visitMaxFloor>currentMap.floor){player.isMoveing=false;currentMap=maps[currentMap.floor+1];currentMap.mapView(player,0);}}else if(keyCode==83){if(currentMap.floor>0){player.isMoveing=false;currentMap=maps[currentMap.floor-1];currentMap.mapView(player,0);}}}
return true;}
function playerCanMove(p_location){if(p_location.x<0||p_location.x>currentMap.columns||p_location.y<0||p_location.y>currentMap.rows)return false;var tmpObj=currentMap.getLocationObj(p_location);if(tmpObj.id==LU_ID){return true;}else if(tmpObj.id==510){currentMap.changeMapContent(p_location,goodsArray[LU_ID]);return true;}else if(tmpObj.id<=300){player.dialogObject=tmpObj;var ret=computeFightLossLife(player.property['gongjiMax'],player.property['fangyu'],player.property['sudu'],tmpObj.property['gongjiMin'],tmpObj.property['fangyu'],tmpObj.property['sudu'],tmpObj.property['shengming']);if(ret.life>player.property['shengming']){speakWin.show(getTipWordMsg("你现在还无法与{0}进行抗衡，请抓紧时间修炼！！",[tmpObj.name],"red","11pt"));return false;}else{fightWin.show(tmpObj);currentMap.changeMapContent(p_location,goodsArray[LU_ID]);return true;}}else if(tmpObj.id==304||tmpObj.id==305||tmpObj.id==306){player.dialogObject=tmpObj;if(addPlayerProperty(player,speakWin,{des:tmpObj.successDes,property_array:new Array()},{property:tmpObj.conditionPropertyName,value:1,des:tmpObj.failedDes})){currentMap.changeMapContent(p_location,goodsArray[LU_ID]);return true;}}else if(tmpObj.id==301||tmpObj.id==302||tmpObj.id==303||tmpObj.id==307||tmpObj.id==308||tmpObj.id==312||tmpObj.id==309||tmpObj.id==310||tmpObj.id==323||tmpObj.id==313||tmpObj.id==315||tmpObj.id==320||tmpObj.id==321||tmpObj.id==325||tmpObj.id==326||tmpObj.id==314||tmpObj.id==316||tmpObj.id==319||tmpObj.id==603||tmpObj.id==604||tmpObj.id==655||tmpObj.id==656){player.dialogObject=tmpObj;if(addPlayerProperty(player,speakWin,{des:tmpObj.gainGoodsDes,property_array:tmpObj.addPropertyArray},tmpObj.conditionObj)){currentMap.changeMapContent(p_location,goodsArray[LU_ID]);return true;}
return false;}else if(tmpObj.id==324){player.dialogObject=tmpObj;player.property['shengming']*=2;currentMap.changeMapContent(p_location,goodsArray[LU_ID]);speakWin.show(getTipWordMsg(tmpObj.gainGoodsDes,[tmpObj.name],"red","11pt"));return true;}else if(tmpObj.id==311||tmpObj.id==317||tmpObj.id==318||tmpObj.id==322){player.goods[tmpObj.gainGoodsObj.property]++;currentMap.changeMapContent(p_location,goodsArray[LU_ID]);player.dialogObject=tmpObj;speakWin.show(getTipWordMsg(tmpObj.gainGoodsObj.des,tmpObj.gainGoodsObj.tipDes,"red","11pt"));return true;}else if(tmpObj.id==605||tmpObj.id==650||tmpObj.id==651||tmpObj.id==652||tmpObj.id==653||tmpObj.id==654){player.dialogObject=tmpObj;goumaiWin.show(tmpObj.id);return false;}else if(tmpObj.id==601||tmpObj.id==602||tmpObj.id==606){player.dialogObject=tmpObj;if(tmpObj.action==0){speakWin.show(tmpObj.getSpeakMsg());return false;}else if(tmpObj.action==1){if(player.goods[tmpObj.speakArray[tmpObj.action].xuyaowupin]>0){currentMap.changeMapContent(p_location,goodsArray[LU_ID]);tmpObj.visitNum=1;speakWin.show(tmpObj.getSpeakMsg());return true;}else{speakWin.show(tmpObj.getSpeakMsg());return false;}}}else if(tmpObj.id==507||tmpObj.id==508){player.isMoveing=false;var tmpFloor,tmpPlayerPosition;if(tmpObj.id==507){tmpFloor=currentMap.floor+1;tmpPlayerPosition=0;if(currentMap.floor+1>=player.visitMaxFloor){player.visitMaxFloor=currentMap.floor+1;}}else if(tmpObj.id==508){tmpFloor=currentMap.floor-1;tmpPlayerPosition=1;}
currentMap=maps[tmpFloor];currentMap.mapView(player,tmpPlayerPosition);return false;}
return false;}
$(document).ready(function(){$("#beginGameBtn").click(function(){init();});});